<!DOCTYPE html>
<html lang="it" class="no-js" prefix="og: http://ogp.me/ns#">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Regole Tecniche CIE SAML version: latest documentazione | 2. Protocolli di comunicazione</title>

  <!-- Styles -->
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css">
  <link rel="stylesheet" href="_static/pygments.css" type="text/css">

  <!-- Relations -->
  <link rel="index" title="Indice" href="index.html">
  <link rel="top" title="Regole Tecniche CIE SAML version: latest documentazione" href="index.html">
  <link rel="next" title="3. Modalitá di trasmissione dei messaggi" href="binding.html">
  <link rel="prev" title="1. Federazione" href="federazione.html">

  
  
  <!-- No Index - keep if out of docs.italia.it -->
  
  <meta name="robots" content="noindex, nofollow">
  
</head>

<body class="docs-italia">
  <script>
	if (document.location.href.indexOf('?payload=') >= 0)
		document.body.className += ' loading';
</script>
  <header class="container-fluid container-fluid--desktop px-0 header">
  <nav class="navbar navbar-expand-lg primary-bg-a7 navbar-dark slim-header justify-content-start p-0 pl-lg-4 pr-lg-5">
    <span class="navbar-brand ml-4"><a class="text-white" href="https://www.agid.gov.it">AGID</a> + <a class="text-white" href="https://teamdigitale.governo.it">Team Digitale</a></span>
    <button class="navbar-toggler collapsed text-white px-2 py-0 mr-3"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation">
    <span class="navbar__icon it-expand my-auto ml-1"></span></button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="http://pianotriennale-ict.italia.it">Piano Triennale</a>
        </li>
        <li role="separator" class="nav-item divider ml-lg-0 ml-3"></li>
        <li class="nav-item nav-text px-lg-2 pl-3 d-lg-none ">
          <span class="nav-text text-uppercase text-white">Le community</span>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://developers.italia.it">Developers</a>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://designers.italia.it">Designers</a>
        </li>
        <li role="separator" class="nav-item divider ml-lg-0 ml-3"></li>
        <li class="nav-item nav-text px-lg-2 pl-3 d-lg-none ">
          <span class="nav-text text-uppercase text-white">Gli strumenti</span>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://forum.italia.it">Forum</a>
        </li>
        <li class="nav-item px-lg-2 pl-3 active">
          <a class="nav-link" href="https://docs.italia.it">Docs</a>
        </li>
        <li class="nav-item px-lg-2 pl-3">
          <a class="nav-link" href="https://github.com/italia">GitHub</a>
        </li>
      </ul>
    </div>
    
    <div class="ml-auto">
      
    </div>
  </nav>

  <div class="row p-4 px-lg-5 m-0 bg-primary--dark align-items-center">
    <div class="row w-100">
      <div class="logo--header">
        <a href="/" tabindex="-1" aria-hidden="true" class="d-block">
          <svg class="svg--header align-bottom" xmlns="http://www.w3.org/2000/svg" height="78.187" width="97.387" viewBox="0 0 91.300002 73.300002"><g fill="#fff"><path d="M31.799 71.9V15.7h15.1V72h-15.1zM91.099 28.5h-13.8v23.1c0 2.3.1 3.8.2 4.8.1.9.5 1.7 1.2 2.4s1.8 1 3.3 1l8.6-.2.7 12c-5 1.1-8.9 1.7-11.5 1.7-6.8 0-11.4-1.5-13.8-4.6-2.5-3-3.7-8.6-3.7-16.8V0h15.1v15.6h13.8v12.9zM9.099 32.8c-2.6 0-4.8-.9-6.5-2.7s-2.6-4-2.6-6.6.9-4.8 2.5-6.6c1.7-1.8 3.9-2.6 6.5-2.6s4.8.9 6.5 2.7 2.5 4 2.5 6.7-.8 4.8-2.5 6.6c-1.6 1.6-3.7 2.5-6.4 2.5z"/></g></svg>
        </a>
      </div>
      <div class="col pl-3 pl-sm-4">
        <h1 class="h1--header mb-1">
          <a href="/" class="site-title text-white">
            Docs Italia
            
              <span class="badge badge-pill bg-primary--mid-dark align-middle">beta</span>
            
          </a>
        </h1>
        <h2 class="text-white mb-0 h2--header">Documenti pubblici, digitali.</h2>
      </div>
    </div>
    <div class="row mt-4 w-100 docs__document-info">
      <div class="col-md-6">
        <i class="docs-icon-document docs__document-info__icon"></i>
        <a href="index.html" class="text-white font-weight-normal">
          Regole Tecniche CIE SAML version: latest documentazione
        </a>
      </div>
      <div class="docs__document-info__ownership col-md-5 offset-md-1 mt-3 mt-md-0">
        
        <div class="w-100">
          <i class="docs-icon-project docs__document-info__icon"></i>
          <span class="docs__document-info__label ml-1">Progetto:</span>
          <a href="/organizzazione-demo/progetto-demo" class="text-white font-weight-normal">
            <u>Progetto demo</u>
          </a>
        </div>
        
        
        <div class="w-100 mt-1">
          <i class="docs-icon-publisher docs__document-info__icon"></i>
          <span class="docs__document-info__label ml-1">Amministrazione:</span>
          <a href="/organizzazione-demo/" class="text-white font-weight-normal">
            <u>Organizzazione demo</u>
          </a>
        </div>
        
      </div>
    </div>
  </div>
</header>
<div class="doc-header container-fluid container-fluid--desktop bg-white">
  <div class="row py-3 px-4 px-lg-5 align-items-center flex-nowrap justify-content-between">
    <div class="col-auto d-md-none d-flex align-items-center order-1">
      <a href="#" class="btn p-2" role="button" id="searchbox-toggle" data-toggle="collapse" data-target="#searchbox" aria-controls="searchbox" aria-expanded="false" aria-label="Toggle searchbox">
        <span class="docs-icon-search d-inline-block">
          <span class="sr-only">Cerca nel documento</span>
        </span>
      </a>
    </div>
    <div class="col-3 d-none d-md-flex pl-0">
      
  <div class="w-100" role="search">
    <form class="mr-md-3" id="rtd-search-form" action="search.html" method="get">
      <div class="input-group" role="search">
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
        <input type="text" class="p-2 text-grey form-control" style="" required="" id="cerca" name="q" placeholder="Cerca nel documento...">
				<span class="input-group-append">
					<button type="submit" class="btn btn-default text-primary px-3 py-2" role="search">
            <span class="docs-icon-search d-block my-auto">
							<span class="sr-only">Cerca nel documento</span>
						</span>
					</button>
				</span>
			</div>
    </form>
  </div>
    </div>
    <div class="col-auto d-flex align-items-center justify-content-center flex-md-grow-1 order-0 order-md-1 pl-0">
      
      <a href="#" role="button" class="btn p-2" data-toggle="modal" data-target="#document-info">
        <span class="docs-icon-info"></span>
        <span class="d-none d-md-inline align-middle">Informazioni</span>
      </a>
      
    </div>
    <div class="col-4 col-sm-auto d-flex flex-md-grow-1 align-items-center justify-content-center order-1">
      <div id="rst-menu" class="px-2">
        <div class="dropdown" id="version-list">
            <button class="btn btn-primary dropdown-toggle badge badge-pill bg-primary text-nowrap px-3 py-2" type="button" id="dropdownVersionButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span class="current-version">bozza</span>
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownVersionButton">
              <div class="version-list-wrapper"></div>
            </div>
        </div>
      </div>
    </div>
    <div class="col-auto d-none d-md-flex flex-grow-1 align-items-center order-1">
      <div class="document-actions d-flex flex-column flex-md-row justify-content-around w-100 p-2 p-md-0 text-blue">
  <div class="dropdown p-3 px-md-2 py-md-0 d-flex flex-wrap">
    <a class="btn dropdown-toggle p-2 flex-grow-1 text-left" href="#" id="downloads-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="docs-icon-download align-middle"></span>
      <span class="align-middle">Scarica</span>
    </a>
    <div class="dropdown-menu w-100" aria-labelledby="downloads-dropdown" aria-disabled="false">
      <div class="link-list-wrapper">
        <ul class="link-list">
          
        </ul>
      </div>
    </div>
  </div>
  
  
  
  <div class="p-3 px-md-2 py-md-0">
    <a href="#" role="button" class="btn p-2 disabled" aria-disabled="true">
        <span class="docs-icon-github"></span>
        <span class="align-middle">Sorgente</span>
    </a>
  </div>
</div>
    </div>
    
    <div class="col-auto pr-0 d-md-none d-flex align-items-center justify-content-end order-1">
      <a href="#" role="button" class="btn py-2 px-0" data-toggle="modal" data-target="#document-actions">
        <span class="docs-icon-more"></span>
        <span class="sr-only">Azioni</span>
      </a>
    </div>
  </div>
  <div class="row">
    <div class="progress-container">
      <div class="progress-bar" id="scrollprogressBar"></div>
    </div>
  </div>
</div>

	<!--
  Forum Italia comments templates
-->

<script id="forum-italia-comments" type="text/template">
  <div class="block-comments" id="accordion-comments-{{ topicId }}" data-topic="{{ topicId }}">
    <!-- Top header -->
    <div class="block-comments__header d-flex border-top border-bottom border-width-2 pt-3 pb-3 align-items-center justify-content-between">
      <h6 class="col-auto text-uppercase mb-0">{{ commentsCount }} Commenti</h6>
      <button class="col-auto block-comments__toggle-btn rounded-circle border border-medium-blue border-width-2 collapsed" data-toggle="collapse" data-target="#comments-{{ topicId }}" aria-expanded="false">
        <span class="docs-icon-plus"></span>
        <span class="docs-icon-minus"></span>
      </button>
    </div>
  </div>
  <div class="block-comments__body collapse" data-parent="#accordion-comments-{{ topicId }}" id="comments-{{ topicId }}">
    <!-- Input row -->
    <div class="d-flex align-items-center mb-4 block-comments__input">
      <div class="box-comment {{ canPost }}" data-topic="{{ topicId }}"></div>
    </div>
    <div class="row">
      <div class="block-comments__container col">
        <div class="row mt-4">
          <ul class="block-comments__list col items mb-0" id="accordion-comment-item" data-topic="{{ topicId }}"></ul>
        </div>
      </div>
    </div>
    <div class="block-comments__header d-flex border-bottom border-width-2 pt-3 pb-3 mb-4 align-items-center justify-content-end">
      <button class="col-auto block-comments__toggle-btn rounded-circle border border-medium-blue border-width-2 collapsed" data-toggle="collapse" data-target="#comments-{{ topicId }}" aria-expanded="false">
        <span class="docs-icon-plus"></span>
        <span class="docs-icon-minus"></span>
      </button>
    </div>
  </div>
</script>

<script id="forum-italia__comment" type="text/template">
  <li id="comment-{{ post.id }}" class="row mb-4 block-comments__item {{ hidden }} {{ isNew }}"
      data-topic="{{ post.topic_id }}" data-comment="{{ post.id }}">
    <div id="reply-to-{{ post.id }}" class="block-comments__reply-anchor"></div>
    <figure class="col-auto mb-0">
      <img class="block-comments__img rounded-circle" src="{{ avatarUrl }}">
    </figure>
    <div class="col block-comments__content">
      <div class="row align-items-center justify-content-between" id="comment-heading-1">
        <div class="col-auto">
          <span class="block-comments__name text-capitalize mb-0">{{ displayName }}</span>
        </div>
        <div class="col-auto">
          <p class="d-inline-block mr-2 block-comments__date mb-0">{{ date }}</p>
          <button class="block-comments__item-btn" data-toggle="collapse"
                  data-target="#collapse-{{ post.id }}">
            <i class="it-collapse"></i>
            <i class="it-expand"></i>
          </button>
        </div>
      </div>
      <p class="text-uppercase block-comments__role">{{ publicUserField }}</p>
      <div class="my-3">{{ replyLink }}</div>
      <div id="collapse-{{ post.id }}" class="block-comments__paragraph pl-3 border-left collapse show"
           aria-labelledby="comment-heading-1">
        {{ post.cooked }}
      </div>
      <div class="block-comments__actions mb-2 mt-3">
        {{ postActions }}
      </div>
    </div>
  </li>
</script>

<script id="forum-italia__like-button" type="text/template">
  <small>
      <button id="{{ buttonAction }}-like-{{ post.id }}" type="button" class="btn btn-primary btn-sm mr-2 px-2 py-1">
        {{ likeCount }}
        <i class="it-favorite ml-1 mr-0"></i>
      </button>
      {{ likeDone }}
    </small>
</script>

<script id="forum-italia__like-info" type="text/template">
  <small>
      <span id="like-{{ post.id }}" class="border rounded btn-sm mr-2 px-2 py-1">
        {{ likeCount }}
        <i class="it-favorite ml-1 mr-0"></i>
      </span>
      {{ likeDone }}
    </small>
</script>

<script id="forum-italia__reply-link" type="text/template">
  <div>
    <small>In risposta al 
      <a class="reply-to-post" href="#reply-to-{{ replyDest.id }}">
        commento di {{ replyDest.name }}
      </a>
    </small>
  </div>
</script>

<script id="forum__login" type="text/template">
  <div class="box-comment__user-image box-comment__user-image--anon">
    <i class="docs-icon-user"></i>
  </div>
  <div class="box-comment__login">
    <div><button class="login-button btn-link p-0 border-0 align-baseline">Accedi al Forum</button> per commentare</div>
  </div>
</script>

<script id="forum__comment" type="text/template">
  <div class="form group">
    <div class="box-comment__errors-box"></div>
    <!-- Write -->
    <div class="d-flex align-items-center mt-4 mb-4 block-comments__input box-comment__write">
      <figure class="col-auto mb-0">
        <img class="block-comments__img box-comment__figure rounded-circle" src="">
          <figcaption>
            <a href="#logout" class="block-comments__logout-link block-comments__logout-link--visible" data-toggle="modal" data-target="#logout-modal" title="Logout" alt="Logout">Logout</a>
          </figcaption>
      </figure>
      <textarea class="form-control box-comment__body col ml-2 p-2" id="comments-input" placeholder="Scrivi qui un commento. Per formattare il testo puoi usare Markdown. Clicca sul bottone 'suggerimenti' per vedere alcuni esempi." rows="4"></textarea>
    </div>
    <!-- Buttons -->
    <div class="box-comment__buttons">
      <button type="button" class="btn btn-primary btn-sm box-comment__submit mr-2" disabled="true"><div>invia</div></button>
      <button type="button" class="btn btn-sm btn-secondary new-comment__suggestions" data-container="body" data-toggle="popover" data-content="html">suggerimenti</button><span class="loading no-bg">&nbsp;</span>
    </div>
    <div class="box-comment__required">
      <span>Scrivi almeno altri <span class="required-chars">20</span> caratteri</span>
    </div>
  </div>
</script>

<script id="forum-italia__missing_permission" type="text/template">
	<div class="pl-2 block-comments__input missing_permission error error--{{ errorCode }} row">
		<figure class="col-auto mb-0 mr-2">
			<img class="block-comments__img new-comment__figure rounded-circle" src="">
			<figcaption>
				<a href="#logout" class="block-comments__logout-link block-comments__logout-link--visible" data-toggle="modal" data-target="#logout-modal" title="Logout" alt="Logout">Logout</a>
			</figcaption>
		</figure>

		<div class="missing_permission__text col pt-2">{{ errorText }}</div>
	</div>
</script>

<script id="forum__logout--modal" type="text/template">
  <div class="modal logout-modal" id="logout-modal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Logout</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Dopo il logout non sarà possibile scrivere nuovi commenti. Sicuro di voler procedere?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" id="logout-modal__submit">Conferma</button>
          <button type="button" class="btn btn-secondary" data-dismiss="modal" id="logout-modal__cancel">Annulla</button>
        </div>
      </div>
    </div>
  </div>
</script>

<script id="forum-italia__markup__tooltip" type="text/template">
  <div class="tooltip tooltip--active doc-tooltip box-comment__suggestions__tooltip" role="tooltip">
    <div class="tooltip__wrap">
      Markdown per la formattazione del testo:
      <ul class="tooltip__content">
        <li><b>Grassetto:</b> __testo__ (o **testo**)</li>
        <li><i>Corsivo</i>: _testo_</li>
        <li>Link: [Testo](http://example.com)</li>
        <li>Citazione: &gt; Testo citazione</li>
      </ul>
    </div>
  </div>
</script>

<script id="forum-italia__silenced" type="text/template">
  <div class="error error__silenced">
    Il tuo account è stato temporaneamente sospeso, scopri di più leggendo
    <a href="{{ notificationsUrl }}" target="_blank">le tue notifiche</a> su Forum Italia.
    <br>
  </div>
</script>

<script id="forum-italia__closedTopic" type="text/template">
  <div class="error error__closed">
    Questa discussione è in sola lettura.
    <br>
  </div>
</script>

<script id="section_navigation__comments" type="text/template">
  <li class="chapter-nav__item">
      <span class="it-comment mr-2 align-middle"></span>
      <a href="#forum-italia-comments-{{ topicId }}" class="chapter-link chapter-link--expand">
          {{ postsCount }} commenti
      </a>
  </li>
</script>


<!--
  markup_modifier templates
-->

<script id="markup_modifier__chapter-header" type="text/template"> <div class="chapter-header clearfix"><div class="title-wrap"> </script>

<script id="markup_modifier__icon" type="text/template">
	<span class="docs-icon-{{ i }}"></span>
</script>

<script id="markup_modifier__note-action" type="text/template">
	<div class='note-action'>
		<button type='button' class='note-close-btn'>×</button>
		<button type='button' class='note-back-btn'><i class='it-arrow-up'></i> {{ text }} </button>
	</div>
</script>

<script id="markup_modifier__admonition" type="text/template">
	<div class='admonition__toggle-wrap'>
		<button type='button' class='admonition__toggle-btn'>
			<span class='admonition__toggle-show-more'>
				{{ more }} <span class='docs-icon-plus'></span>
			</span>
			<span class='admonition__toggle-show-less'>
				{{ less }} <span class='docs-icon-minus'></span>
			</span>
		</button>
	</div>
</script>


<!--
  glossary_page templates
-->

<script id="glossary__btn" type="text/template">
	<button class='glossary-page__btn collapsed border-top border-grey-light border-width-2 pt-3 pb-3' data-toggle='collapse' data-target='#glossary-{{ id }}' aria-expanded='true' aria-controls='glossary-{{ id }}'>
		<span class='docs-icon-plus mr-3'> </span>
		<span class='docs-icon-minus mr-3'> </span>
		{{ text }}
	</button>
</script>

<script id="glossary__copy-link" type="text/template">
	<div class='glossary-page__copy-link-wrap mt-3'>
		<i class='it-link mr-2 align-middle'></i>
		<button type='button' class='glossary-page__copy-link'> {{ copyLink }} </button>
	</div>
</script>


<!--
  searchbox_collapse templates
-->

<script id="searchbox-collapse" type="text/template">
	<div class="row p-2"><div class="col"></div></div>
</script>


<!--
  section_navigation templates
-->

<script id="section_navigation__nav" type="text/template">
    <div class="chapter-nav">
        <div class="chapter-nav__wrap">
            <ul class="chapter-nav__list chapter-nav__list--visible">
                <li class="chapter-nav__item">
                    <span class="it-more-items mr-2 align-middle"></span>
                    <button type="button" data-toggle="modal"
                        class="chapter-link chapter-link--expand">{{ seeActions }}</button>
                </li>
            </ul>
            <div class="{{ modalClass }} chapter-nav__list--hidden" tabindex="-1" role="dialog"
                     aria-labelledby="myLargeModalLabel" aria-hidden="true">
                <div class="{{ modalContainerClass }}">
                    <div class="{{ modalContentClass }} chapter-nav__list-wrap">
                        <div class="chapter-nav__title"> {{ title }} </div>
                        <ul class="chapter-nav__list">
                            <li class="chapter-nav__item">
                                <i class="it-link mr-2 align-middle"></i>
                                <button type="button" class="chapter-link">{{ copyLink }}</button>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</script>


<!--
  tooltip templates
-->

<script id="tooltip__main" type="text/template">
	<div class='tooltip tooltip--active doc-tooltip' role='tooltip'>
		<div class='tooltip__wrap'>
			<button type='button' role='button' class='tooltip__close-btn' data-ref="{{ item.ref }}"></button>
			<h2 class='tooltip__title'>{{ item.title }}</h2>
			<p class='tooltip__content'>{{ item.body }}</p>
		</div>
	</div>
</script>

<script id="tooltip__glossary" type="text/template">
	<div class='tooltip tooltip--active doc-tooltip' role='tooltip'>
		<div class='tooltip__wrap'>
			<button type='button' role='button' class='tooltip__close-btn' data-ref="{{ item.ref }}"></button>
			<h2 class='tooltip__title'>{{ item.title }}</h2>
			<p class='tooltip__content'>{{ trimmedSummary }}</p> {{ btnToGlossary }}
		</div>
	</div>
</script>

<script id="tooltip__note" type="text/template">
	<div class='tooltip tooltip--active doc-tooltip doc-tooltip--note' role='tooltip'>
		<div class='tooltip__wrap'>
			<button type='button' role='button' class='tooltip__close-btn' data-ref="{{ item.ref }}"></button>
			<h2 class='tooltip__title'>{{ item.title }}</h2>
			<p class='tooltip__content'> {{ item.body }}</p>
		</div>
	</div>
</script>


  <div id="main" role="document">
    <div class="container-fluid container-fluid--desktop main-container">
      <div class="row">
        <nav class="col--nav">
          <section class="docs-menu">
  <div id="desktop-menu" class="sidebar-nav">
    <a class=""
      aria-controls="desktop-menu" aria-label="esci dalla navigazione" title="esci dalla navigazione" href="#">
      <span class="" aria-hidden="true"></span>
    </a>

    <button data-toggle="collapse" data-target="#content-index" aria-expanded="true" class="sidebar-btn p-3 sidebar-btn--desktop" type="button" aria-controls="content-index">
      indice dei contenuti
      <span class="it-collapse float-right"></span>
      <span class="it-expand float-right"></span>
    </button>
    <div id="content-index" class="content-index--menu sidebar-list--wrapper sidebar-accordion-content collapse show">
      <ul class="">
        <li class="toctree-l1 ">
          <a href='index.html'>Sommario</a>
        </li>
      </ul>
      
      <p class="caption" role="heading"><span class="caption-text">Indice dei contenuti</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="federazione.html">1. Federazione</a><ul>
<li class="toctree-l2"><a class="reference internal" href="federazione.html#metadata-idp">1.1. Metadata IdP</a></li>
<li class="toctree-l2"><a class="reference internal" href="federazione.html#metadata-sp">1.2. Metadata SP</a></li>
<li class="toctree-l2"><a class="reference internal" href="federazione.html#struttura-del-metadata">1.3. Struttura del metadata</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Protocolli di comunicazione</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#richiesta-di-autenticazione-saml">2.1. Richiesta di autenticazione SAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="#risposta-di-autenticazione-saml">2.2. Risposta di autenticazione SAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logout">2.3. Logout</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="binding.html">3. Modalitá di trasmissione dei messaggi</a><ul>
<li class="toctree-l2"><a class="reference internal" href="binding.html#binding-http-post">3.1. Binding HTTP-POST</a></li>
<li class="toctree-l2"><a class="reference internal" href="binding.html#binding-http-redirect">3.2. Binding HTTP-Redirect</a></li>
<li class="toctree-l2"><a class="reference internal" href="binding.html#esempio-html-di-utilizzo">3.3. Esempio HTML di utilizzo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ciespid.html">4. Interoperabilità con SPID</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ciespid.html#metadata">4.1. Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="ciespid.html#protocolli-di-comunicazione">4.2. Protocolli di comunicazione</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">5. Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracciature.html">6. Tracciature</a></li>
<li class="toctree-l1"><a class="reference internal" href="assistenza.html">7. Assistenza tecnica</a><ul>
<li class="toctree-l2"><a class="reference internal" href="assistenza.html#troubleshooting">7.1. Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pki.html">8. Crittografia e infrastruttura a chiave pubblica (PKI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pki.html#sigilli-di-federazione">8.1. Sigilli di federazione</a></li>
<li class="toctree-l2"><a class="reference internal" href="pki.html#struttura-dei-certificati-di-federazione">8.2. Struttura dei certificati di federazione</a></li>
<li class="toctree-l2"><a class="reference internal" href="pki.html#algoritmi-crittografici">8.3. Algoritmi crittografici</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="codiciErrore.html">9. Codici di errore</a></li>
</ul>

      
    </div>

    
    <button data-toggle="collapse" data-target="#figures-index" aria-expanded="true" class="sidebar-btn p-3 sidebar-btn--desktop collapsed" type="button" aria-controls="figures-index">
      indice delle figure
      <span class="it-collapse float-right"></span>
      <span class="it-expand float-right"></span>
    </button>
    <div id="figures-index" class="figures-index--menu sidebar-list--wrapper sidebar-accordion-content collapse">
      <ul>
<li><a class="reference internal" href="#processo-autenticazione-con-cie">Fig. 2.1 - Processo di autenticazione del CieID Server</a></li>
<li><a class="reference internal" href="#logout-entra-con-cie">Fig. 2.2 - Schermata di conferma di avvenuto Logout.</a></li>
</ul>

    </div>
    

    
    <button data-toggle="collapse" data-target="#table-index" aria-expanded="true" class="sidebar-btn p-3 sidebar-btn--desktop collapsed" type="button" aria-controls="table-index">
      indice delle tabelle
      <span class="it-collapse float-right"></span>
      <span class="it-expand float-right"></span>
    </button>
    <div id="table-index" class="table-index--menu collapse sidebar-list--wrapper sidebar-accordion-content collapse">
      <ul>
<li><a class="reference internal" href="assistenza.html#tabella-troubleshooting">Tab. 7.1 - Troubleshooting</a></li>
<li><a class="reference internal" href="codiciErrore.html#id1">Tab. 9.1 - Autenticazione corretta</a></li>
<li><a class="reference internal" href="codiciErrore.html#id2">Tab. 9.2 - Anomalie di sistema</a></li>
<li><a class="reference internal" href="codiciErrore.html#id3">Tab. 9.3 - Anomalie di binding</a></li>
<li><a class="reference internal" href="codiciErrore.html#id4">Tab. 9.4 - Anomalie della richiesta - codici 7,8,9</a></li>
<li><a class="reference internal" href="codiciErrore.html#id5">Tab. 9.5 - Anomalie della richiesta - codici 10,11,12</a></li>
<li><a class="reference internal" href="codiciErrore.html#id6">Tab. 9.6 - Anomalie della richiesta - codici 13,14,15</a></li>
<li><a class="reference internal" href="codiciErrore.html#id7">Tab. 9.7 - Anomalie della richiesta - codici 16,17,18</a></li>
<li><a class="reference internal" href="codiciErrore.html#id8">Tab. 9.8 - Anomalie utente</a></li>
</ul>

    </div>
    

    
  </div>
</section>
          <!-- Toggle -->
<div class="navbar-toggler--wrap navbar-toggler--wrap--bottom p-3">
  <div class="navbar-toggler navbar-toggler--open p-0 border-0 ml-auto">
    <div class="navbar-toggler-bottom__chapter align-middle text-truncate">
      <span class="it-list mr-2"></span><span class="section-number">2. </span>Protocolli di comunicazione
    </div>
  </div>
</div>

<div class="sidebar-tabs">

  <!-- Back button. -->
  <div class="row">
    <div class="col">
      <button class="navbar-toggler navbar-toggler--back border-0 ml-auto" type="button" data-toggle="offcanvas">
        <span class="it-arrow-left align-middle"></span>
        <span class="navbar-toggler__chapter align-middle ml-2">
          indici e glossario
        </span>
      </button>
    </div>
  </div>

  <!-- Tab -->
  <ul class="row ml-3 mr-3 nav nav-tabs" role="tablist">
    <li class="col text-center active">
      <a id="content-index-mobile-tab" data-toggle="tab" href="#content-index-mobile" aria-controls="content-index-mobile" role="tab" aria-selected="true" class="sidebar-btn p-2 sidebar-btn--mobile active show">
        contenuti
      </a>
    </li>
    <li class="col text-center">
      <a id="figures-index-mobile-tab" data-toggle="tab" href="#figures-index-mobile" aria-controls="figures-index-mobile" role="tab" aria-selected="false" class="col sidebar-btn p-2 sidebar-btn--mobile">
        figure
      </a>
    </li>
    <li class="col text-center">
      <a id="table-index-mobile-tab" data-toggle="tab" href="#table-index-mobile" aria-controls="table-index-mobile" role="tab" aria-selected="false" class="col sidebar-btn p-2 sidebar-btn--mobile">
        tabelle
      </a>
    </li>
    <li class="col text-center">
      <a id="glossary-index-mobile-tab" data-toggle="tab" href="#glossary-index-mobile" aria-controls="glossary-index-mobile" role="tab" aria-selected="false" class="col sidebar-btn p-2 sidebar-btn--mobile">
        glossario
      </a>
    </li>
  </ul>
</div>


<!-- Off canvas -->
<section class="docs-offcanvas-menu" id="sidebar-nav">
  <div class="tab-content sidebar-nav">

      <div id="content-index-mobile" class="content-index--menu tab-pane sidebar-list--wrapper fade show active" role="tabpanel" aria-labelledby="content-index-mobile-tab">
        <ul class="">
          <li class="toctree-l1 ">
            <a href='index.html'>Sommario</a>
          </li>
        </ul>
        
        <p class="caption" role="heading"><span class="caption-text">Indice dei contenuti</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="federazione.html">1. Federazione</a><ul>
<li class="toctree-l2"><a class="reference internal" href="federazione.html#metadata-idp">1.1. Metadata IdP</a></li>
<li class="toctree-l2"><a class="reference internal" href="federazione.html#metadata-sp">1.2. Metadata SP</a></li>
<li class="toctree-l2"><a class="reference internal" href="federazione.html#struttura-del-metadata">1.3. Struttura del metadata</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Protocolli di comunicazione</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#richiesta-di-autenticazione-saml">2.1. Richiesta di autenticazione SAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="#risposta-di-autenticazione-saml">2.2. Risposta di autenticazione SAML</a></li>
<li class="toctree-l2"><a class="reference internal" href="#logout">2.3. Logout</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="binding.html">3. Modalitá di trasmissione dei messaggi</a><ul>
<li class="toctree-l2"><a class="reference internal" href="binding.html#binding-http-post">3.1. Binding HTTP-POST</a></li>
<li class="toctree-l2"><a class="reference internal" href="binding.html#binding-http-redirect">3.2. Binding HTTP-Redirect</a></li>
<li class="toctree-l2"><a class="reference internal" href="binding.html#esempio-html-di-utilizzo">3.3. Esempio HTML di utilizzo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ciespid.html">4. Interoperabilità con SPID</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ciespid.html#metadata">4.1. Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="ciespid.html#protocolli-di-comunicazione">4.2. Protocolli di comunicazione</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">5. Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracciature.html">6. Tracciature</a></li>
<li class="toctree-l1"><a class="reference internal" href="assistenza.html">7. Assistenza tecnica</a><ul>
<li class="toctree-l2"><a class="reference internal" href="assistenza.html#troubleshooting">7.1. Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pki.html">8. Crittografia e infrastruttura a chiave pubblica (PKI)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pki.html#sigilli-di-federazione">8.1. Sigilli di federazione</a></li>
<li class="toctree-l2"><a class="reference internal" href="pki.html#struttura-dei-certificati-di-federazione">8.2. Struttura dei certificati di federazione</a></li>
<li class="toctree-l2"><a class="reference internal" href="pki.html#algoritmi-crittografici">8.3. Algoritmi crittografici</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="codiciErrore.html">9. Codici di errore</a></li>
</ul>

        
      </div>

      <div id="figures-index-mobile" class="figures-index--menu tab-pane sidebar-list--wrapper fade" role="tabpanel" aria-labelledby="figures-index-mobile-tab">
        <ul>
<li><a class="reference internal" href="#processo-autenticazione-con-cie">Fig. 2.1 - Processo di autenticazione del CieID Server</a></li>
<li><a class="reference internal" href="#logout-entra-con-cie">Fig. 2.2 - Schermata di conferma di avvenuto Logout.</a></li>
</ul>

      </div>

      <div id="table-index-mobile" class="table-index--menu tab-pane sidebar-list--wrapper fade" role="tabpanel" aria-labelledby="table-index-mobile-tab">
        <ul>
<li><a class="reference internal" href="assistenza.html#tabella-troubleshooting">Tab. 7.1 - Troubleshooting</a></li>
<li><a class="reference internal" href="codiciErrore.html#id1">Tab. 9.1 - Autenticazione corretta</a></li>
<li><a class="reference internal" href="codiciErrore.html#id2">Tab. 9.2 - Anomalie di sistema</a></li>
<li><a class="reference internal" href="codiciErrore.html#id3">Tab. 9.3 - Anomalie di binding</a></li>
<li><a class="reference internal" href="codiciErrore.html#id4">Tab. 9.4 - Anomalie della richiesta - codici 7,8,9</a></li>
<li><a class="reference internal" href="codiciErrore.html#id5">Tab. 9.5 - Anomalie della richiesta - codici 10,11,12</a></li>
<li><a class="reference internal" href="codiciErrore.html#id6">Tab. 9.6 - Anomalie della richiesta - codici 13,14,15</a></li>
<li><a class="reference internal" href="codiciErrore.html#id7">Tab. 9.7 - Anomalie della richiesta - codici 16,17,18</a></li>
<li><a class="reference internal" href="codiciErrore.html#id8">Tab. 9.8 - Anomalie utente</a></li>
</ul>

      </div>

      <div id="glossary-index-mobile" class="glossary-mobile--menu tab-pane sidebar-list--wrapper fade" role="tabpanel" aria-labelledby="glossary-index-mobile-tab">
        None
      </div>

  </div>
</section>
        </nav>
        <div id="doc-content" class="col-content">
          <!--<div class="doc-content__consultation">
            <span class="it-icon-edit"></span>
            in consultazione
          </div>-->
          
            <div class="footer-buttons footer-buttons--prev" role="navigation" aria-label="footer navigation">
                <a href="federazione.html" class="" title="1. Federazione" accesskey="p" rel="prev"> Torna a <span class="section-number">1. </span>Federazione</a>
            </div>
          
          
  <section id="protocolli-di-comunicazione">
<span id="protocolli"></span><h1><span class="section-number">2. </span>Protocolli di comunicazione<a class="headerlink" href="#protocolli-di-comunicazione" title="Permalink to this heading">¶</a></h1>
<p>Terminata la fase di federazione tramite lo scambio dei metadata opportunamente predisposti come da specifiche riportate nella precedente sezione, il Service Provider viene aggiunto nella <em>trusted list</em> dell'Identity Provider ed é quindi possibile lo scambio dei messaggi previsto dal protocollo SAML SSO.</p>
<p>Tale scambio viene avviato nel momento in cui l’utente esprime la volontà di accedere al servizio cliccando il tasto «Entra con CIE» nell’apposita pagina html del Service Provider. In seguito alla pressione del tasto “Entra con CIE” il SP predispone una richiesta di autenticazione (<code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnRequest&gt;</span></code>) e la inoltra, reindirizzando opportunamente l’utente, all’Identity Provider del Ministero dell’Interno.</p>
<p>La componente server dell’Identity Provider (CieID Server) interpreta la richiesta di autenticazione e avvia la cosiddetta fase di “challenge” che varia in funzione del livello di sicurezza richiesto dal Service Provider. In particolare:</p>
<ol class="arabic simple">
<li><p>Invita l’utente a verificare le proprie credenziali username e password o a scansionare un QR Code mediante l’app CieID, in caso di accesso con livello di sicurezza “basso” (livello 1);</p></li>
<li><p>Invita l’utente a verificare le proprie credenziali username e password e un secondo fattore di autenticazione OTP o a scansionare un QR Code mediante l’app CieID, in caso di accesso con livello di sicurezza “significativo” (livello 2);</p></li>
<li><p>Invita l’utente a avvicinare la propria CIE sul lettore (RF o NFC) avviando automaticamente il processo di autenticazione mediante la CIE, in caso di accesso con livello di sicurezza “alto” (livello 3). Poggiata la carta sul lettore, allL’utente deve, quindi,viene richiesto di inserire la seconda metà del PIN e confermare.</p></li>
</ol>
<figure class="align-default" id="processo-autenticazione-con-cie">
<img alt="Processo di autenticazione del CieID Server" src="_images/processoAutenticazioneCIE.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.1 </span><span class="caption-text">Processo di autenticazione del CieID Server</span><a class="headerlink" href="#processo-autenticazione-con-cie" title="Link a questa immagine">¶</a></p>
</figcaption>
</figure>
<p>Terminato il processo di autenticazione il server CieID mostra una pagina contenente gli attributi qualificati  che si stanno per inviare al Service Provider (nome, cognome, data di nascita, codice fiscale e, se richiesti, numero di telefono ed e-mail) desunti dal certificato digitale a bordo della carta. L’utente, informato degli attributi che si stanno per inviare al servizio, fornisce il consenso all’invio e prosegue con l’operazione.</p>
<p>L’Identity Provider reindirizza nuovamente l’utente   sul sito del Service Provider, con un'asserzione (<code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Response&gt;</span></code>) digitalmente firmata e contenente gli attributi qualificati richiesti.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>All'interno dello schema Entra con CIE solo il <em>Single Sign-On</em> viene gestisto tramite protocollo SAML che prevede di tue tipologie di messaggi:</p>
<ul class="simple">
<li><p>Richiesta di autenticazione: <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnRequest&gt;</span></code>;</p></li>
<li><p>Risposta di autenticazione: <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Response&gt;</span></code>.</p></li>
</ul>
<p>La gestione del logout, attualmente, non supporta il procollo SAML, ma viene gestite mediante un meccanismo di <em>Simple Logout</em> che provvede all'eliminazione della sessione di autenticazione dell'Identity Provider. Pertanto, pur accettando le richieste SAML di <em>Single Logout</em>, l'IdP server CieID non restituisce alcuna risposta SAML.</p>
</div>
<section id="richiesta-di-autenticazione-saml">
<h2><span class="section-number">2.1. </span>Richiesta di autenticazione SAML<a class="headerlink" href="#richiesta-di-autenticazione-saml" title="Permalink to this heading">¶</a></h2>
<p>La richiesta di autenticazione (&quot;<em>request</em>&quot;) è inviata dal Service Provider attraverso il browser dell'utente al <em>SingleSignOnService</em> dell'Identity Provider. Il messaggio contenuto in essa deve essere conforme allo standard SAML v2.0 (cfr. <a class="reference external" href="https://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf">Assertions and Protocols for the OASIS SAML V2.0</a>).</p>
<p>L'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnRequest&gt;</span></code> costituisce il contenitore del messaggio e deve avere i seguenti attributi:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code highlight xml docutils literal highlight-xml">Destination</code> rappresenta un URL in https che indica l'indirizzo dell'Identity Provider a cui è inviata la richiesta e deve coincidere con uno degli attributi <code class="code highlight xml docutils literal highlight-xml">Location</code> presenti nel tag <code class="code highlight xml docutils literal highlight-xml">SingleSignOnService</code> riportato nel metadata dell'IdP e relativo al particolare binding utilizzato in fase di richiesta (cfr. <a class="reference internal" href="binding.html#binding"><span class="std std-ref">Modalitá di trasmissione dei messaggi</span></a> per ulteriori dettagli).  L'Identity Provider verifica tale riferimento e, in caso di esito negativo, la richiesta viene scartata.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">AttributeConsumingServiceIndex</code> riportante un indice posizionale in riferimento alla struttura <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AttributeConsumingService&gt;</span></code> presente nei metadata del Service Provider. A tal proposito si ricorda che gli attributi richiesti nel metadata <strong>devono</strong> contenere il <em>Minimum Dataset eIDAS</em>.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">AssertionConsumerServiceURL</code> indica la URL a cui inviare il messaggio di risposta alla richiesta di autenticazione (l'indirizzo deve coincidere con quello del servizio riportato dall'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AssertionConsumingService&gt;</span></code> presente nei metadata del Service Provider);</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">ProtocolBinding</code> identifica il tipo di binding e <strong>deve</strong> essere valorizzato con <code class="code docutils literal notranslate"><span class="pre">urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST</span></code>.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">ForceAuthn</code> è <strong>sempre</strong> valorizzato con <code class="code docutils literal notranslate"><span class="pre">true</span></code> in quanto si richiede un'autenticazione con massimo livello di sicurezza.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">IssueInstant</code> indica l'istante di emissione della richiesta, in formato UTC (p.es. <code class="code docutils literal notranslate"><span class="pre">AAAA-MM-GGThh:mm:ss.sssZ</span></code>)</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">ID</code> univoco basato su un Universally Unique Identifier (<strong>UUID</strong>) o su una combinazione origine + timestamp (quest'ultimo generato con una precisione di almeno un millesimo di secondo per garantire l'univocità).</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">Version</code> coerentemente con la versione di SAML adottata; attualmente la <code class="code docutils literal notranslate"><span class="pre">2.0</span></code>.</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<ul class="simple">
<li><p><strong>In alternativa</strong>, è ammesso l'uso dell'attributo <code class="code highlight xml docutils literal highlight-xml">AssertionConsumerServiceIndex</code> al posto degli attributi <code class="code highlight xml docutils literal highlight-xml">AssertionConsumerServiceURL</code> e <code class="code highlight xml docutils literal highlight-xml">ProtocolBinding</code>.</p></li>
<li><p>L'attributo <code class="code highlight xml docutils literal highlight-xml">IsPassive</code> <strong>non</strong> deve essere presente.</p></li>
<li><p>L'attributo <code class="code highlight xml docutils literal highlight-xml">Destination</code> <strong>deve</strong> essere valorizzato in accordo con lo standard SAML e <strong>non</strong> secondo quanto prescitto dalle Regole Tecniche SPID.</p></li>
</ul>
</div>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">&lt;samlp:AuthnRequest</span>
<span class="linenos"> 2</span>  <span class="na">xmlns:samlp=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span>
<span class="linenos"> 3</span>  <span class="na">AttributeConsumingServiceIndex=</span><span class="s">&quot;0&quot;</span>
<span class="linenos"> 4</span>  <span class="na">AssertionConsumerServiceIndex=</span><span class="s">&quot;0&quot;</span>
<span class="linenos"> 5</span>  <span class="na">Destination=</span><span class="s">&quot;https://idserver.servizicie.interno.gov.it/idp/profile/SAML2/Redirect/SSO&quot;</span>
<span class="linenos"> 6</span>  <span class="na">ForceAuthn=</span><span class="s">&quot;true&quot;</span>
<span class="linenos"> 7</span>  <span class="na">IssueInstant=</span><span class="s">&quot;2020-10-29T12:51:36.123Z&quot;</span>
<span class="linenos"> 8</span>  <span class="na">ID=</span><span class="s">&quot;...&quot;</span>
<span class="linenos"> 9</span>  <span class="na">Version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
<span class="linenos">10</span>    [...]
<span class="linenos">11</span><span class="nt">&lt;/samlp:AuthnRequest&gt;</span>
</pre></div>
</div>
<p>Gli elementi che devono essere presenti all'interno della <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnRequest&gt;</span></code> sono:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;saml:Issuer&gt;</span></code>: identifica in maniera univoca il Service Provider. L'elemento deve essere valorizzato come l'attributo <code class="code highlight xml docutils literal highlight-xml">entityID</code> riportato nel corrispondente metadata del Service Provider. Prevede, inoltre, i seguenti attributi opzionali:</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">NameQualifier</code>, dominio a cui afferisce il soggetto che sta effettuando la richiesta di autenticazione e valorizzato come URL riconducibile al Service Provider;</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">Format</code>, se presente <strong>deve</strong> essere valorizzato con la stringa <code class="code docutils literal notranslate"><span class="pre">urn:oasis:names:tc:SAML:2.0:nameid-format:entity</span></code>.</p></li>
</ul>
</div></blockquote>
<ul>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;NameIDPolicy&gt;</span></code> avente l'attributo <code class="code highlight xml docutils literal highlight-xml">Format</code> valorizzato con la stringa <code class="code docutils literal notranslate"><span class="pre">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</span></code>, mentre invece <strong>non deve</strong> essere presente l'attributo <code class="code highlight xml docutils literal highlight-xml">AllowCreate</code>.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;RequestedAuthnContext&gt;</span></code> (ne è presente <strong>una sola</strong> occorrenza) specifica i requisiti del contesto di autenticazione di statement di autenticazione restituite in risposta a una richiesta. Esso è valorizzato come segue:</p>
<blockquote>
<div><ul>
<li><p>mediante l'attributo <code class="code highlight xml docutils literal highlight-xml">Comparison</code>, che specifica il metodo di confronto utilizzato per valutare le classi o gli statement di contesto richiesti e può essere valorizzato soltanto come <code class="code docutils literal notranslate"><span class="pre">exact</span></code> (default), ovvero <code class="code docutils literal notranslate"><span class="pre">minimum</span></code>;</p></li>
<li><p>contenente l'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;RequestedAuthnContext&gt;</span></code>, contiene a sua volta l'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;saml:AuthnContextClassRef&gt;</span></code>, valorizzato con uno dei seguenti valori:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">https://www.spid.gov.it/SpidL1</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">https://www.spid.gov.it/SpidL2</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">https://www.spid.gov.it/SpidL3</span></code></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Lo schema di autenticazione &quot;<em>Entra con CIE</em>&quot;, nell'ottica di agevolare gli sviluppi implementativi da parte dei Service Provider che giá hanno aderito al Sistema Pubblico di Identità Digitale (<em>SPID</em>), richiede la valorizzazione di tale elemento con una delle suddette stringhe (corrispondenti ai tre livelli di sicurezza SPID), secondo lo specifico livello di sicurezza richiesto (dall'utente o dal SP).
Pertanto, per consentire al cittadino di autenticarsi sia a servizi accessibili tramite CIE, che a quelli accessibili tramite qualunque livello di sicurezza SPID, le possibili combinazioni di valori dell'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;RequestedAuthnContextClassRef&gt;</span></code> e dell'attributo-antenato <code class="code highlight xml docutils literal highlight-xml">Comparison</code> sono, rispettivamente:</p>
<ul class="simple">
<li><p>autenticazione di livello &quot;<em>alto</em>&quot; (livello 3): <code class="code docutils literal notranslate"><span class="pre">https://www.spid.gov.it/SpidL3</span></code> e, equivalentemente, <code class="code docutils literal notranslate"><span class="pre">exact</span></code> ovvero <code class="code docutils literal notranslate"><span class="pre">minimum</span></code>;</p></li>
<li><p>autenticazione di livello almeno &quot;<em>significativo</em>&quot; (livello 2 o superiore): <code class="code docutils literal notranslate"><span class="pre">https://www.spid.gov.it/SpidL2</span></code> e <code class="code docutils literal notranslate"><span class="pre">minimum</span></code>;</p></li>
<li><p>autenticazione di livello &quot;<em>basso</em>&quot;&quot; o superiore (livello 1 o superiore): <code class="code docutils literal notranslate"><span class="pre">https://www.spid.gov.it/SpidL1</span></code> e <code class="code docutils literal notranslate"><span class="pre">minimum</span></code>;</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<ul class="simple">
<li><p>Dipendentemente dal tipo di binding utilizzato per inviare la richiesta di autenticazione può essere presente o meno l'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Signature&gt;</span></code> (<strong>obbligatorio</strong> in caso di binding HTTP POST), che contiene il sigillo elettronico creato dal Service Provider sulla propia <em>request</em>. Per maggiori dettagli, si veda il capitolo relativo all'<a class="reference internal" href="pki.html#pki"><span class="std std-ref">infrastruttura a chiave pubblica</span></a>.</p></li>
<li><p>Non sono presenti gli elementi <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;RequesterID&gt;</span></code> e <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Scoping&gt;</span></code>.</p></li>
</ul>
</div>
<section id="esempio-di-request-saml">
<h3><span class="section-number">2.1.1. </span>Esempio di <em>request</em> SAML<a class="headerlink" href="#esempio-di-request-saml" title="Permalink to this heading">¶</a></h3>
<p>Si noti che l'elemento XML <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Signature&gt;</span></code> nel seguente esempio va inserito solo nel caso di utilizzo del binding HTTP POST; in caso di binding HTTP Redirect, il sigillo elettronico è immerso invece nel parametro <code class="code docutils literal notranslate"><span class="pre">Signature</span></code> della <em>query string</em>. Per ulteriori informazioni si faccia riferimento al capitolo sull'<a class="reference internal" href="pki.html#pki"><span class="std std-ref">infrastruttura a chiave pubblica</span></a>.</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">&lt;samlp:AuthnRequest</span>
<span class="linenos"> 2</span>  <span class="na">xmlns:samlp=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span>
<span class="linenos"> 3</span>  <span class="na">xmlns:saml=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span>
<span class="linenos"> 4</span>  <span class="na">xmlns:ds=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#&quot;</span>
<span class="linenos"> 5</span>  <span class="na">AttributeConsumingServiceIndex=</span><span class="s">&quot;0&quot;</span>
<span class="linenos"> 6</span>  <span class="na">AssertionConsumerServiceURL=</span><span class="s">&quot; [...] &quot;</span>
<span class="linenos"> 7</span>  <span class="na">ProtocolBinding=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot;</span>
<span class="linenos"> 8</span>  <span class="na">Destination=</span><span class="s">&quot;https://idserver.servizicie.interno.gov.it/idp/profile/SAML2/POST/SSO&quot;</span>
<span class="linenos"> 9</span>  <span class="na">ForceAuthn=</span><span class="s">&quot;true&quot;</span>
<span class="linenos">10</span>  <span class="na">ID=</span><span class="s">&quot;...&quot;</span>
<span class="linenos">11</span>  <span class="na">IssueInstant=</span><span class="s">&quot;2020-11-02T09:01:25Z&quot;</span> <span class="na">Version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
<span class="linenos">12</span>    <span class="nt">&lt;saml:Issuer</span> <span class="na">NameQualifier=</span><span class="s">&quot;https://service_provide_entityID&quot;</span><span class="nt">&gt;</span>
<span class="linenos">13</span>        https://service_provider_entityID
<span class="linenos">14</span>    <span class="nt">&lt;/saml:Issuer&gt;</span>
<span class="linenos">15</span>    <span class="nt">&lt;ds:Signature&gt;</span>
<span class="linenos">16</span>        <span class="nt">&lt;ds:SignedInfo&gt;</span>
<span class="linenos">17</span>            <span class="nt">&lt;ds:CanonicalizationMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos">18</span>            <span class="nt">&lt;ds:SignatureMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha256&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos">19</span>            <span class="nt">&lt;ds:Reference</span> <span class="na">URI=</span><span class="s">&quot;RIFERIMENTO ALL&#39;ID DELL&#39;ATTRIBUTO&quot;</span><span class="nt">&gt;</span>
<span class="linenos">20</span>                <span class="nt">&lt;ds:Transforms&gt;</span>
<span class="linenos">21</span>                    <span class="nt">&lt;ds:Transform</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos">22</span>                    <span class="nt">&lt;ds:Transform</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos">23</span>                <span class="nt">&lt;/ds:Transforms&gt;</span>
<span class="linenos">24</span>                <span class="nt">&lt;ds:DigestMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos">25</span>                <span class="nt">&lt;ds:DigestValue&gt;</span> [...] <span class="nt">&lt;/ds:DigestValue&gt;</span>
<span class="linenos">26</span>            <span class="nt">&lt;/ds:Reference&gt;</span>
<span class="linenos">27</span>        <span class="nt">&lt;/ds:SignedInfo&gt;</span>
<span class="linenos">28</span>        <span class="nt">&lt;ds:SignatureValue&gt;</span> [...] <span class="nt">&lt;/ds:SignatureValue&gt;</span>
<span class="linenos">29</span>        <span class="nt">&lt;ds:KeyInfo&gt;</span>
<span class="linenos">30</span>            <span class="nt">&lt;ds:X509Data&gt;</span>
<span class="linenos">31</span>                <span class="nt">&lt;ds:X509Certificate&gt;</span> [...] <span class="nt">&lt;/ds:X509Certificate&gt;</span>
<span class="linenos">32</span>            <span class="nt">&lt;/ds:X509Data&gt;</span>
<span class="linenos">33</span>        <span class="nt">&lt;/ds:KeyInfo&gt;</span>
<span class="linenos">34</span>    <span class="nt">&lt;/ds:Signature&gt;</span>
<span class="linenos">35</span>    <span class="nt">&lt;samlp:NameIDPolicy</span> <span class="na">Format=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:transient&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos">36</span>    <span class="nt">&lt;samlp:RequestedAuthnContext</span> <span class="na">Comparison=</span><span class="s">&quot;minimum&quot;</span><span class="nt">&gt;</span>
<span class="linenos">37</span>        <span class="nt">&lt;saml:AuthnContextClassRef&gt;</span>https://www.spid.gov.it/SpidL3<span class="nt">&lt;/saml:AuthnContextClassRef&gt;</span>
<span class="linenos">38</span>    <span class="nt">&lt;/samlp:RequestedAuthnContext&gt;</span>
<span class="linenos">39</span><span class="nt">&lt;/samlp:AuthnRequest&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="risposta-di-autenticazione-saml">
<h2><span class="section-number">2.2. </span>Risposta di autenticazione SAML<a class="headerlink" href="#risposta-di-autenticazione-saml" title="Permalink to this heading">¶</a></h2>
<p>Al termine della <em>challenge</em> mediante la CIE, effettuata dal server CieID dell'Identity Provider, quest'ultimo invia un messaggio di risposta (&quot;<em>response</em>&quot;) al Service Provider. L'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Response&gt;</span></code> costituisce la radice del messaggio e contiene i seguenti attributi:</p>
<ul class="simple">
<li><p><code class="code highlight xml docutils literal highlight-xml">Destination</code>: URL del Service Provider a cui è inviata la risposta; coincide con la URL riportata nel metadata cosí come specificato dall'attributo <code class="code highlight xml docutils literal highlight-xml">location</code> presente nell'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AssertionConsumerService&gt;</span></code>. Il Service Provider deve verificare il riferimento URI e, in caso di esito negativo, deve scartare la risposta;</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">ID</code>: identificatore univoco basato su un Universally Unique Identifier (<strong>UUID</strong>) o su una combinazione origine + <em>timestamp</em> (quest'ultimo generato con una precisione di almeno un millesimo di secondo per garantire l'univocità);</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">InResponseTo</code>: riferimento all'ID della richiesta a cui si risponde;</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">IssueInstant</code>: indica l'istante di emissione della richiesta, in formato UTC (<code class="code docutils literal notranslate"><span class="pre">AAAA-MM-GGThh:mm:ss.sssZ</span></code>);</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">Version</code>: riferimento alla versione SAML (2.0) utilizzata dallo schema Entra con CIE.</p></li>
</ul>
<p>Gli elementi contenuti nella <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Response&gt;</span></code> (tutti dichiarati con il corretto uso dei <em>namespace</em> XML) sono:</p>
<ul>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Issuer&gt;</span></code>: in maniera analoga a quanto previsto per la <em>request</em>, tale campo indica l'EntityID del soggetto che effettua l'autenticazione (cioè l'Identity Provider stesso) e coincide perciò con l'attributo <code class="code highlight xml docutils literal highlight-xml">entityID</code> del metadata dell'IdP.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Signature&gt;</span></code>: contiene il sigillo elettronico apposto sulla <em>request</em> dell'Identity Provider. Per ulteriori informazioni si faccia riferimento al capitolo sull'<a class="reference internal" href="pki.html#pki"><span class="std std-ref">infrastruttura a chiave pubblica</span></a>.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Status&gt;</span></code>: indica l'esito della richiesta di autenticazione e in particolare prevede l'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;StatusCode&gt;</span></code> che riporta la codifica di stato SAML attraverso l'attributo <code class="code highlight xml docutils literal highlight-xml">Value</code>, valorizzato come:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">urn:oasis:names:tc:SAML:2.0:status:Success</span></code>, nel caso di autenticazione effettuata con successo;</p></li>
<li><p>in caso di errori, é possibile visualizzare gli attributi <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;StatusMessage&gt;</span></code> e <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;StatusDetail&gt;</span></code> per maggiori dettagli sull'errore ricevuto.</p></li>
</ul>
</div></blockquote>
</li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Assertion&gt;</span></code>: costituisce l'elemento piú importante che attesta l'avvenuta autenticazione e contiene gli attributi dell'utente che ha richiesto l'accesso al servizio. Contiene almeno un elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnStatement&gt;</span></code> nel quale sono riportati i dati dell'utente richiesti dal Service Provider. Nel caso l'Identity Provider abbia riscontrato un errore nella gestione della richiesta di autenticazione l'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Assertion&gt;</span></code> non é presente.</p></li>
</ul>
<section id="esempio-di-response-saml">
<h3><span class="section-number">2.2.1. </span>Esempio di <em>response</em> SAML<a class="headerlink" href="#esempio-di-response-saml" title="Permalink to this heading">¶</a></h3>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="nt">&lt;samlp:Response</span>
<span class="linenos"> 2</span>  <span class="na">xmlns:samlp=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span>
<span class="linenos"> 3</span>  <span class="na">xmlns:saml=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span>
<span class="linenos"> 4</span>  <span class="na">Destination=</span><span class="s">&quot;https://service_provide_assertion_consumer&quot;</span>
<span class="linenos"> 5</span>  <span class="na">InResponseTo=</span><span class="s">&quot;...&quot;</span>
<span class="linenos"> 6</span>  <span class="na">IssueInstant=</span><span class="s">&quot;2020-10-29T11:36:02.708Z&quot;</span>
<span class="linenos"> 7</span>  <span class="na">ID=</span><span class="s">&quot;...&quot;</span>
<span class="linenos"> 8</span>  <span class="na">Version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 9</span>    <span class="nt">&lt;saml:Issuer&gt;</span>
<span class="linenos">10</span>        https://idserver.servizicie.interno.gov.it/idp/profile/SAML2/POST/SSO
<span class="linenos">11</span>    <span class="nt">&lt;/saml:Issuer&gt;</span>
<span class="linenos">12</span>    <span class="nt">&lt;ds:Signature</span> <span class="na">xmlns:ds=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#&quot;</span><span class="nt">&gt;</span>
<span class="linenos">13</span>        [...]
<span class="linenos">14</span>    <span class="nt">&lt;/ds:Signature&gt;</span>
<span class="linenos">15</span>    <span class="nt">&lt;samlp:Status&gt;</span>
<span class="linenos">16</span>        <span class="nt">&lt;samlp:StatusCode</span> <span class="na">Value=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:status:Success&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos">17</span>    <span class="nt">&lt;/samlp:Status&gt;</span>
<span class="linenos">18</span>    <span class="nt">&lt;saml:Assertion&gt;</span>
<span class="linenos">19</span>        [...]
<span class="linenos">20</span>    <span class="nt">&lt;/saml:Assertion&gt;</span>
<span class="linenos">21</span><span class="nt">&lt;/samlp:Response&gt;</span>
</pre></div>
</div>
</section>
<section id="l-elemento-saml-assertion">
<h3><span class="section-number">2.2.2. </span>L'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;saml:Assertion&gt;</span></code><a class="headerlink" href="#l-elemento-saml-assertion" title="Permalink to this heading">¶</a></h3>
<p>Nell'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Assertion&gt;</span></code> devono essere presenti i seguenti attributi:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code highlight xml docutils literal highlight-xml">ID</code>: identificatore univoco basato su un <em>Universally Unique Identifier</em> (<strong>UUID</strong>) o su una combinazione origine + <em>timestamp</em> (quest'ultimo generato con una precisione di almeno un millesimo di secondo per garantire l'univocità);</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">IssueInstant</code>: indica l'istante di emissione della richiesta, in formato UTC (<code class="code docutils literal notranslate"><span class="pre">AAAA-MM-GGThh:mm:ss.sssZ</span></code>);</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">Version</code>: riferimento alla versione SAML (<code class="code docutils literal notranslate"><span class="pre">2.0</span></code>) utilizzata dallo schema <em>Entra con CIE</em>.</p></li>
</ul>
</div></blockquote>
<p>Gli attributi contenuti nella <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Assertion&gt;</span></code> sono i seguenti:</p>
<blockquote>
<div><ul>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Issuer&gt;</span></code>: valorizzato coerentemente con l'<em>EntityID</em> (attributo <code class="code highlight xml docutils literal highlight-xml">entityID</code>) presente nei corrispondenti metadata dell'Identity Provider.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Signature&gt;</span></code>: contiene il sigillo elettronico apposto sull'asserzione dell'Identity Provider. Per ulteriori informazioni si faccia riferimento al capitolo sull'<a class="reference internal" href="pki.html#pki"><span class="std std-ref">infrastruttura a chiave pubblica</span></a>.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Subject&gt;</span></code>: serve a qualificare il Service Provider che ha richiesto l'autenticazione. In particolare, contiene due elementi:</p>
<blockquote>
<div><ul>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;NameID&gt;</span></code>: riferimento all'identificativo del SP e contenente principalmente le informazioni che qulificano l'IdP (<code class="code highlight xml docutils literal highlight-xml">NameQualifier</code>) e il SP (<code class="code highlight xml docutils literal highlight-xml">SPNameQualifier</code>)</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;SubjectConfirmation&gt;</span></code>: riporta l'attributo <code class="code highlight xml docutils literal highlight-xml">Method</code> valorizzato con la stringa <code class="code docutils literal notranslate"><span class="pre">urn:oasis:names:tc:SAML:2.0:cm:bearer</span></code>. Tale elemento contiene inoltre l'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;SubjectConfirmationData&gt;</span></code> riportante gli attributi:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code highlight xml docutils literal highlight-xml">Recipient</code> coerente con l'<code class="code highlight xml docutils literal highlight-xml">AssertionConsumerServiceURL</code> relativa al servizio per cui è stata emessa l'asserzione e l'attributo;</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">NotOnOrAfter</code> indica per quanto tempo l'asserzione puó ritenersi legata al <em>subject</em>. L'asserzione puó, tuttavia, essere valida per un tempo piú lungo, ma é necessario creare una sessione entro questo intervallo di tempo (per maggiori dettagli consultare la sezione 4.1.4.3. del Profilo Web SSO). Tale intervallo di tempo deve rientrare necessariamente nell'intervallo di tempo riportato nell'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Conditions&gt;</span></code>;</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">InResponseTo</code> il cui valore deve fare riferimento all'ID della richiesta;</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml">Address</code>, facoltativamente presente, contiene un identificativo univoco (ma non riconducibile a informazioni tecnico-implementative) dello specifico server CieID che ha tecnicamente effettuato l'autenticazione;</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Conditions&gt;</span></code>:  contenente gli attributi <code class="code highlight xml docutils literal highlight-xml">NotBefore</code> e <code class="code highlight xml docutils literal highlight-xml">NotOnOrAfter</code> che rappresentano le condizioni di validitá dell'asserzione. Inoltre é presente l'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AudienceRestriction&gt;</span></code> riportante a sua volta l'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Audience&gt;</span></code>, valorizzato con l'<em>EntityID</em> del Service Provider per il quale l'asserzione è emessa.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnStatement&gt;</span></code>: oltre alle informazioni riguardanti il riferimento alla sessione (<code class="code highlight xml docutils literal highlight-xml">SessionIndex</code>), l'istante temporale di autenticazione dell'utente (<code class="code highlight xml docutils literal highlight-xml">AuthnInstant</code>). Contiene a sua volta  l'elemento <code class="code highlight xml docutils literal highlight-xml">AuthnContext</code> e il sotto-elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnContextClassRef&gt;</span></code> valorizzato con il livello di affidabilità associato all'autenticazione con CIE.</p></li>
<li><p><code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AttributeStatement&gt;</span></code>: rappresenta la struttura nella quale sono riportati gli attributi relativi all'utente, così come richiesti dell'omologo elemento della <em>request</em> SAML.</p></li>
</ul>
</div></blockquote>
<p>In particolare, a fronte della richiesta del <em>eIDAS Minimum Data Set</em> l'asserzione contiene quattro elementi di tipo <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Attribute&gt;</span></code> (ciascuno contenente l'attributo <code class="code highlight xml docutils literal highlight-xml">Name</code> valorizzato come segue e l'attributo <code class="code highlight xml docutils literal highlight-xml">NameFormat</code> valorizzato con <code class="code docutils literal notranslate"><span class="pre">urn:oasis:names:tc:SAML:2.0:attrname-forma</span></code>):</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">name</span></code> (di tipo <code class="code highlight xml docutils literal highlight-xml">xs:string</code>), valorizzato con il <strong>nome</strong> del soggetto;</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">familyName</span></code> (di tipo <code class="code highlight xml docutils literal highlight-xml">xs:string</code>), valorizzato con il <strong>cognome</strong> del soggetto;</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">dateOfBirth</span></code> (di tipo <code class="code highlight xml docutils literal highlight-xml">xs:string</code>) <strong>data di nascita</strong> nel formato <code class="code docutils literal notranslate"><span class="pre">YYYY-MM-GG</span></code>;</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">fiscalNumber</span></code> (di tipo <code class="code highlight xml docutils literal highlight-xml">xs:string</code>), valorizzato con il <strong>codice fiscale</strong> nel formato <code class="code docutils literal notranslate"><span class="pre">TINIT-&lt;CODICE</span> <span class="pre">FISCALE&gt;</span></code>.</p></li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>L'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnContextClassRef&gt;</span></code> discendente dell'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnStatement&gt;</span></code> è <strong>sempre</strong> valorizzato con <code class="code docutils literal notranslate"><span class="pre">https://www.spid.gov.it/SpidL3</span></code> poiché la CIE fornisce un livello di affidabilità massimo a livello europeo, corispondente al Livello 3 del Sitema Pubblico dell'Identità Digitale (<em>SPID</em>). Per favorire l'interoperabilitá con SPID da parte dei Service Provider e minimizzare quindi l'impatto nella gestione implementativa delle risposte SAML per i SP che intendono aderere ad entrambi gli schemi di autenticazione, si restituisce dunque una classe analoa a quella usata dagli Identity Provider SPID nelle <em>response</em> associate ad autenticazioni avvenute con Livello 3.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">Assertion</span>
<span class="linenos"> 2</span>  <span class="n">xmlns</span><span class="p">:</span><span class="n">saml</span><span class="o">=</span><span class="s2">&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span>
<span class="linenos"> 3</span>  <span class="n">xmlns</span><span class="p">:</span><span class="n">xs</span><span class="o">=</span><span class="s2">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>
<span class="linenos"> 4</span>  <span class="n">xmlns</span><span class="p">:</span><span class="n">xsi</span><span class="o">=</span><span class="s2">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="linenos"> 5</span>  <span class="n">IssueInstant</span><span class="o">=</span><span class="s2">&quot;2020-11-03T09:19:36.785Z&quot;</span>
<span class="linenos"> 6</span>  <span class="n">ID</span><span class="o">=</span><span class="s2">&quot;...&quot;</span>
<span class="linenos"> 7</span>  <span class="n">Version</span><span class="o">=</span><span class="s2">&quot;2.0&quot;</span><span class="o">&gt;</span>
<span class="linenos"> 8</span>    <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">Issuer</span><span class="o">&gt;</span>
<span class="linenos"> 9</span>        <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">idserver</span><span class="o">.</span><span class="n">servizicie</span><span class="o">.</span><span class="n">interno</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">it</span><span class="o">/</span><span class="n">idp</span><span class="o">/</span><span class="n">profile</span><span class="o">/</span><span class="n">SAML2</span><span class="o">/</span><span class="n">POST</span><span class="o">/</span><span class="n">SSO</span>
<span class="linenos">10</span>    <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">Issuer</span><span class="o">&gt;</span>
<span class="linenos">11</span>    <span class="o">&lt;</span><span class="n">ds</span><span class="p">:</span><span class="n">Signature</span> <span class="n">xmlns</span><span class="p">:</span><span class="n">ds</span><span class="o">=</span><span class="s2">&quot;http://www.w3.org/2000/09/xmldsig#&quot;</span><span class="o">&gt;</span>
<span class="linenos">12</span>        <span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="linenos">13</span>    <span class="o">&lt;/</span><span class="n">ds</span><span class="p">:</span><span class="n">Signature</span><span class="o">&gt;</span>
<span class="linenos">14</span>    <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">Subject</span><span class="o">&gt;</span>
<span class="linenos">15</span>        <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">NameID</span>
<span class="linenos">16</span>          <span class="n">Format</span><span class="o">=</span><span class="s2">&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:transient&quot;</span>
<span class="linenos">17</span>          <span class="n">NameQualifier</span><span class="o">=</span><span class="s2">&quot;https://idserver.servizicie.interno.gov.it/idp/profile/SAML2/POST/SSO&quot;</span><span class="o">&gt;</span>
<span class="linenos">18</span>            <span class="n">RIFERIMENTO</span> <span class="n">ID</span> <span class="n">ENTE</span>
<span class="linenos">19</span>        <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">NameID</span><span class="o">&gt;</span>
<span class="linenos">20</span>        <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">SubjectConfirmation</span> <span class="n">Method</span><span class="o">=</span><span class="s2">&quot;urn:oasis:names:tc:SAML:2.0:cm:bearer&quot;</span><span class="o">&gt;</span>
<span class="linenos">21</span>            <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">SubjectConfirmationData</span>
<span class="linenos">22</span>              <span class="n">InResponseTo</span><span class="o">=</span><span class="s2">&quot;...&quot;</span>
<span class="linenos">23</span>              <span class="n">NotOnOrAfter</span><span class="o">=</span><span class="s2">&quot;2020-11-03T09:24:36.807Z&quot;</span>
<span class="linenos">24</span>              <span class="n">Recipient</span><span class="o">=</span><span class="s2">&quot;https://service_provider_assertion_consumer&quot;</span> <span class="o">/&gt;</span>
<span class="linenos">25</span>        <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">SubjectConfirmation</span><span class="o">&gt;</span>
<span class="linenos">26</span>    <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">Subject</span><span class="o">&gt;</span>
<span class="linenos">27</span>    <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">Conditions</span>
<span class="linenos">28</span>      <span class="n">NotBefore</span><span class="o">=</span><span class="s2">&quot;2020-11-03T09:19:36.785Z&quot;</span>
<span class="linenos">29</span>      <span class="n">NotOnOrAfter</span><span class="o">=</span><span class="s2">&quot;2020-11-03T09:24:36.785Z&quot;</span><span class="o">&gt;</span>
<span class="linenos">30</span>        <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">AudienceRestriction</span><span class="o">&gt;</span>
<span class="linenos">31</span>            <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">Audience</span><span class="o">&gt;</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">sevice_provider</span><span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">Audience</span><span class="o">&gt;</span>
<span class="linenos">32</span>        <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">AudienceRestriction</span><span class="o">&gt;</span>
<span class="linenos">33</span>    <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">Conditions</span><span class="o">&gt;</span>
<span class="linenos">34</span>    <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">AuthnStatement</span>
<span class="linenos">35</span>      <span class="n">AuthnInstant</span><span class="o">=</span><span class="s2">&quot;2020-11-03T09:19:33.100Z&quot;</span>
<span class="linenos">36</span>      <span class="n">SessionIndex</span><span class="o">=</span><span class="s2">&quot;....&quot;</span><span class="o">&gt;</span>
<span class="linenos">37</span>        <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">AuthnContext</span><span class="o">&gt;</span>
<span class="linenos">38</span>            <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">AuthnContextClassRef</span><span class="o">&gt;</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">spid</span><span class="o">.</span><span class="n">gov</span><span class="o">.</span><span class="n">it</span><span class="o">/</span><span class="n">SpidL3</span><span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">AuthnContextClassRef</span><span class="o">&gt;</span>
<span class="linenos">39</span>        <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">AuthnContext</span><span class="o">&gt;</span>
<span class="linenos">40</span>    <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">AuthnStatement</span><span class="o">&gt;</span>
<span class="linenos">41</span>    <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeStatement</span><span class="o">&gt;</span>
<span class="linenos">42</span>        <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">Attribute</span> <span class="n">FriendlyName</span><span class="o">=</span><span class="s2">&quot;Data di Nascita&quot;</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;dateOfBirth&quot;</span> <span class="n">NameFormat</span><span class="o">=</span><span class="s2">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;</span><span class="o">&gt;</span>
<span class="linenos">43</span>            <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeValue</span> <span class="n">xsi</span><span class="p">:</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;xs:string&quot;</span><span class="o">&gt;</span><span class="n">AAAA</span><span class="o">-</span><span class="n">MM</span><span class="o">-</span><span class="n">GG</span><span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeValue</span><span class="o">&gt;</span>
<span class="linenos">44</span>        <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">Attribute</span><span class="o">&gt;</span>
<span class="linenos">45</span>        <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">Attribute</span> <span class="n">FriendlyName</span><span class="o">=</span><span class="s2">&quot;Codice Fiscale&quot;</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;fiscalNumber&quot;</span> <span class="n">NameFormat</span><span class="o">=</span><span class="s2">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;</span><span class="o">&gt;</span>
<span class="linenos">46</span>            <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeValue</span> <span class="n">xsi</span><span class="p">:</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;xs:string&quot;</span><span class="o">&gt;</span><span class="n">TINIT</span><span class="o">-</span><span class="n">CODICE_FISCALE</span><span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeValue</span><span class="o">&gt;</span>
<span class="linenos">47</span>        <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">Attribute</span><span class="o">&gt;</span>
<span class="linenos">48</span>        <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">Attribute</span> <span class="n">FriendlyName</span><span class="o">=</span><span class="s2">&quot;Nome&quot;</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span> <span class="n">NameFormat</span><span class="o">=</span><span class="s2">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;</span><span class="o">&gt;</span>
<span class="linenos">49</span>            <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeValue</span> <span class="n">xsi</span><span class="p">:</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;xs:string&quot;</span><span class="o">&gt;</span><span class="n">NOME</span><span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeValue</span><span class="o">&gt;</span>
<span class="linenos">50</span>        <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">Attribute</span><span class="o">&gt;</span>
<span class="linenos">51</span>        <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">Attribute</span> <span class="n">FriendlyName</span><span class="o">=</span><span class="s2">&quot;Cognome&quot;</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;familyName&quot;</span> <span class="n">NameFormat</span><span class="o">=</span><span class="s2">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;</span><span class="o">&gt;</span>
<span class="linenos">52</span>            <span class="o">&lt;</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeValue</span> <span class="n">xsi</span><span class="p">:</span><span class="nb">type</span><span class="o">=</span><span class="s2">&quot;xs:string&quot;</span><span class="o">&gt;</span><span class="n">COGNOME</span><span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeValue</span><span class="o">&gt;</span>
<span class="linenos">53</span>        <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">Attribute</span><span class="o">&gt;</span>
<span class="linenos">54</span>    <span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">AttributeStatement</span><span class="o">&gt;</span>
<span class="linenos">55</span><span class="o">&lt;/</span><span class="n">saml</span><span class="p">:</span><span class="n">Assertion</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Con riferimento alla compatibilità con SPID si riporta quanto segue:</p>
<ul class="simple">
<li><p>L'attributo <code class="code highlight xml docutils literal highlight-xml">Format</code> dell'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;samlp:Issuer&gt;</span></code> non è presente;</p></li>
<li><p>L'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;saml:AuthnContextClassRef&gt;</span></code> è valorizzato sempre con il valore <strong>https://www.spid.gov.it/SpidL3</strong>;</p></li>
<li><p>Gli attributi inviati in risposta alla richiesta di autenticazione corrispondono sempre al <strong>Minimum Dataset eIDAS</strong> e non prevedono, nella versione attuale, l'invio di ulteriori attributi quali ad esempio lo <em>spidCode</em>.</p></li>
</ul>
</div>
</section>
<section id="verifica-della-response">
<h3><span class="section-number">2.2.3. </span>Verifica della <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Response&gt;</span></code><a class="headerlink" href="#verifica-della-response" title="Permalink to this heading">¶</a></h3>
<p>Alla ricezione della <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Response&gt;</span></code> qualunque sia il binding utilizzato il Service Provider prima di utilizzare l'asserzione deve eseguire le seguenti verifiche:</p>
<blockquote>
<div><ul>
<li><p>Controllo delle firme presenti all'interno dell'<code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Assertion&gt;</span></code> e della <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Response&gt;</span></code></p></li>
<li><p>Verifica che nell'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;SubjectConfirmationData&gt;</span></code></p>
<blockquote>
<div><ul class="simple">
<li><p>l'attributo <code class="code highlight xml docutils literal highlight-xml">Recipient</code> coincida con la AssertionConsumerServiceURL a cui la <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;Response&gt;</span></code> è pervenuta</p></li>
<li><p>l'attributo <code class="code highlight xml docutils literal highlight-xml">NotOnOrAfter</code>  non sia scaduto</p></li>
<li><p>l'attributo <code class="code highlight xml docutils literal highlight-xml">InResponseTo</code>  si riferisca correttamente all'ID della <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnRequest&gt;</span></code> di richiesta</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>É, inoltre, a carico del Service Provider garantire che le asserzioni non vengano ripresentate, mantenendo il set di identificatori di richiesta (ID) usati come per le <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;AuthnRequest&gt;</span></code> per tutta la durata di tempo per cui l'asserzione risulta essere valida in base dell'attributo <code class="code highlight xml docutils literal highlight-xml">NotOnOrAfter</code> dell'elemento <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;SubjectConfirmationData&gt;</span></code> presente nell'asserzione stessa.</p>
</div>
</section>
<section id="esempio-di-saml-response">
<h3><span class="section-number">2.2.4. </span>Esempio di <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;saml:Response&gt;</span></code><a class="headerlink" href="#esempio-di-saml-response" title="Permalink to this heading">¶</a></h3>
<p>Di seguito si riporta un esempio completo di <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;saml:Response&gt;</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="nt">&lt;samlp:Response</span>
<span class="linenos">  2</span>  <span class="na">xmlns:samlp=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;</span>
<span class="linenos">  3</span>  <span class="na">xmlns:saml=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot;</span>
<span class="linenos">  4</span>  <span class="na">xmlns:ds=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#&quot;</span>
<span class="linenos">  5</span>  <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>
<span class="linenos">  6</span>  <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
<span class="linenos">  7</span>  <span class="na">Destination=</span><span class="s">&quot;https://service_provide_assertion_consumer&quot;</span>
<span class="linenos">  8</span>  <span class="na">ID=</span><span class="s">&quot;...&quot;</span>
<span class="linenos">  9</span>  <span class="na">InResponseTo=</span><span class="s">&quot;...&quot;</span>
<span class="linenos"> 10</span>  <span class="na">IssueInstant=</span><span class="s">&quot;2020-10-29T11:36:02.708Z&quot;</span> <span class="na">Version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 11</span>    <span class="nt">&lt;saml:Issuer&gt;</span>
<span class="linenos"> 12</span>        https://idserver.servizicie.interno.gov.it/idp/profile/SAML2/POST/SSO
<span class="linenos"> 13</span>    <span class="nt">&lt;/saml:Issuer&gt;</span>
<span class="linenos"> 14</span>    <span class="nt">&lt;ds:Signature&gt;</span>
<span class="linenos"> 15</span>        <span class="nt">&lt;ds:SignedInfo&gt;</span>
<span class="linenos"> 16</span>            <span class="nt">&lt;ds:CanonicalizationMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 17</span>            <span class="nt">&lt;ds:SignatureMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha256&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 18</span>            <span class="nt">&lt;ds:Reference</span> <span class="na">URI=</span><span class="s">&quot;...&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 19</span>                <span class="nt">&lt;ds:Transforms&gt;</span>
<span class="linenos"> 20</span>                    <span class="nt">&lt;ds:Transform</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 21</span>                    <span class="nt">&lt;ds:Transform</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 22</span>                <span class="nt">&lt;/ds:Transforms&gt;</span>
<span class="linenos"> 23</span>                <span class="nt">&lt;ds:DigestMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 24</span>                <span class="nt">&lt;ds:DigestValue&gt;</span> [...] <span class="nt">&lt;/ds:DigestValue&gt;</span>
<span class="linenos"> 25</span>            <span class="nt">&lt;/ds:Reference&gt;</span>
<span class="linenos"> 26</span>        <span class="nt">&lt;/ds:SignedInfo&gt;</span>
<span class="linenos"> 27</span>        <span class="nt">&lt;ds:SignatureValue&gt;</span> [...] <span class="nt">&lt;/ds:SignatureValue&gt;</span>
<span class="linenos"> 28</span>        <span class="nt">&lt;ds:KeyInfo&gt;</span>
<span class="linenos"> 29</span>            <span class="nt">&lt;ds:X509Data&gt;</span>
<span class="linenos"> 30</span>                <span class="nt">&lt;ds:X509Certificate&gt;</span> [...] <span class="nt">&lt;/ds:X509Certificate&gt;</span>
<span class="linenos"> 31</span>            <span class="nt">&lt;/ds:X509Data&gt;</span>
<span class="linenos"> 32</span>        <span class="nt">&lt;/ds:KeyInfo&gt;</span>
<span class="linenos"> 33</span>    <span class="nt">&lt;/ds:Signature&gt;</span>
<span class="linenos"> 34</span>    <span class="nt">&lt;samlp:Status&gt;</span>
<span class="linenos"> 35</span>        <span class="nt">&lt;samlp:StatusCode</span> <span class="na">Value=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:status:Success&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 36</span>    <span class="nt">&lt;/samlp:Status&gt;</span>
<span class="linenos"> 37</span>
<span class="linenos"> 38</span>    <span class="nt">&lt;saml:Assertion</span>
<span class="linenos"> 39</span>      <span class="na">ID=</span><span class="s">&quot;...&quot;</span>
<span class="linenos"> 40</span>      <span class="na">IssueInstant=</span><span class="s">&quot;2020-11-03T09:19:36.785Z&quot;</span>
<span class="linenos"> 41</span>      <span class="na">Version=</span><span class="s">&quot;2.0&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 42</span>        <span class="nt">&lt;saml:Issuer</span> <span class="na">Format=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:entity&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 43</span>            https://idserver.servizicie.interno.gov.it/idp/profile/SAML2/POST/SSO
<span class="linenos"> 44</span>        <span class="nt">&lt;/saml:Issuer&gt;</span>
<span class="linenos"> 45</span>        <span class="nt">&lt;ds:Signature&gt;</span>
<span class="linenos"> 46</span>            <span class="nt">&lt;ds:SignedInfo&gt;</span>
<span class="linenos"> 47</span>                <span class="nt">&lt;ds:CanonicalizationMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 48</span>                <span class="nt">&lt;ds:SignatureMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmldsig-more#rsa-sha256&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 49</span>                <span class="nt">&lt;ds:Reference</span> <span class="na">URI=</span><span class="s">&quot;...&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 50</span>                    <span class="nt">&lt;ds:Transforms&gt;</span>
<span class="linenos"> 51</span>                        <span class="nt">&lt;ds:Transform</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2000/09/xmldsig#enveloped-signature&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 52</span>                        <span class="nt">&lt;ds:Transform</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 53</span>                    <span class="nt">&lt;/ds:Transforms&gt;</span>
<span class="linenos"> 54</span>                    <span class="nt">&lt;ds:DigestMethod</span> <span class="na">Algorithm=</span><span class="s">&quot;http://www.w3.org/2001/04/xmlenc#sha256&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 55</span>                    <span class="nt">&lt;ds:DigestValue&gt;</span> [...] <span class="nt">&lt;/ds:DigestValue&gt;</span>
<span class="linenos"> 56</span>                <span class="nt">&lt;/ds:Reference&gt;</span>
<span class="linenos"> 57</span>            <span class="nt">&lt;/ds:SignedInfo&gt;</span>
<span class="linenos"> 58</span>            <span class="nt">&lt;ds:SignatureValue&gt;</span> [...] <span class="nt">&lt;/ds:SignatureValue&gt;</span>
<span class="linenos"> 59</span>            <span class="nt">&lt;ds:KeyInfo&gt;</span>
<span class="linenos"> 60</span>                <span class="nt">&lt;ds:X509Data&gt;</span>
<span class="linenos"> 61</span>                    <span class="nt">&lt;ds:X509Certificate&gt;</span> [...] <span class="nt">&lt;/ds:X509Certificate&gt;</span>
<span class="linenos"> 62</span>                <span class="nt">&lt;/ds:X509Data&gt;</span>
<span class="linenos"> 63</span>            <span class="nt">&lt;/ds:KeyInfo&gt;</span>
<span class="linenos"> 64</span>        <span class="nt">&lt;/ds:Signature&gt;</span>
<span class="linenos"> 65</span>        <span class="nt">&lt;saml:Subject&gt;</span>
<span class="linenos"> 66</span>            <span class="nt">&lt;saml:NameID</span>
<span class="linenos"> 67</span>              <span class="na">Format=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:nameid-format:transient&quot;</span>
<span class="linenos"> 68</span>              <span class="na">NameQualifier=</span><span class="s">&quot;https://idserver.servizicie.interno.gov.it/idp/profile/SAML2/POST/SSO&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 69</span>                RIFERIMENTO ID ENTE
<span class="linenos"> 70</span>            <span class="nt">&lt;/saml:NameID&gt;</span>
<span class="linenos"> 71</span>            <span class="nt">&lt;saml:SubjectConfirmation</span> <span class="na">Method=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:cm:bearer&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 72</span>                <span class="nt">&lt;saml:SubjectConfirmationData</span>
<span class="linenos"> 73</span>                  <span class="na">InResponseTo=</span><span class="s">&quot;...&quot;</span>
<span class="linenos"> 74</span>                  <span class="na">NotOnOrAfter=</span><span class="s">&quot;2020-11-03T09:24:36.807Z&quot;</span>
<span class="linenos"> 75</span>                  <span class="na">Recipient=</span><span class="s">&quot;https://service_provider_assertion_consumer&quot;</span> <span class="nt">/&gt;</span>
<span class="linenos"> 76</span>            <span class="nt">&lt;/saml:SubjectConfirmation&gt;</span>
<span class="linenos"> 77</span>        <span class="nt">&lt;/saml:Subject&gt;</span>
<span class="linenos"> 78</span>        <span class="nt">&lt;saml:Conditions</span>
<span class="linenos"> 79</span>          <span class="na">NotBefore=</span><span class="s">&quot;2020-11-03T09:19:36.785Z&quot;</span>
<span class="linenos"> 80</span>          <span class="na">NotOnOrAfter=</span><span class="s">&quot;2020-11-03T09:24:36.785Z&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 81</span>            <span class="nt">&lt;saml:AudienceRestriction&gt;</span>
<span class="linenos"> 82</span>                <span class="nt">&lt;saml:Audience&gt;</span>https://sevice_provider<span class="nt">&lt;/saml:Audience&gt;</span>
<span class="linenos"> 83</span>            <span class="nt">&lt;/saml:AudienceRestriction&gt;</span>
<span class="linenos"> 84</span>        <span class="nt">&lt;/saml:Conditions&gt;</span>
<span class="linenos"> 85</span>        <span class="nt">&lt;saml:AuthnStatement</span>
<span class="linenos"> 86</span>          <span class="na">AuthnInstant=</span><span class="s">&quot;2020-11-03T09:19:33.100Z&quot;</span>
<span class="linenos"> 87</span>          <span class="na">SessionIndex=</span><span class="s">&quot;....&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 88</span>            <span class="nt">&lt;saml:AuthnContext&gt;</span>
<span class="linenos"> 89</span>                <span class="nt">&lt;saml:AuthnContextClassRef&gt;</span>https://www.spid.gov.it/SpidL3<span class="nt">&lt;/saml:AuthnContextClassRef&gt;</span>
<span class="linenos"> 90</span>            <span class="nt">&lt;/saml:AuthnContext&gt;</span>
<span class="linenos"> 91</span>        <span class="nt">&lt;/saml:AuthnStatement&gt;</span>
<span class="linenos"> 92</span>        <span class="nt">&lt;saml:AttributeStatement&gt;</span>
<span class="linenos"> 93</span>            <span class="nt">&lt;saml:Attribute</span> <span class="na">FriendlyName=</span><span class="s">&quot;Data di Nascita&quot;</span> <span class="na">Name=</span><span class="s">&quot;dateOfBirth&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 94</span>                <span class="nt">&lt;saml:AttributeValue</span> <span class="na">xsi:type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>AAAA-MM-GG<span class="nt">&lt;/saml:AttributeValue&gt;</span>
<span class="linenos"> 95</span>            <span class="nt">&lt;/saml:Attribute&gt;</span>
<span class="linenos"> 96</span>            <span class="nt">&lt;saml:Attribute</span> <span class="na">FriendlyName=</span><span class="s">&quot;Codice Fiscale&quot;</span> <span class="na">Name=</span><span class="s">&quot;fiscalNumber&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;</span><span class="nt">&gt;</span>
<span class="linenos"> 97</span>                <span class="nt">&lt;saml:AttributeValue</span> <span class="na">xsi:type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>TINIT-CODICE_FISCALE<span class="nt">&lt;/saml:AttributeValue&gt;</span>
<span class="linenos"> 98</span>            <span class="nt">&lt;/saml:Attribute&gt;</span>
<span class="linenos"> 99</span>            <span class="nt">&lt;saml:Attribute</span> <span class="na">FriendlyName=</span><span class="s">&quot;Nome&quot;</span> <span class="na">Name=</span><span class="s">&quot;name&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;</span><span class="nt">&gt;</span>
<span class="linenos">100</span>                <span class="nt">&lt;saml:AttributeValue</span> <span class="na">xsi:type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>NOME<span class="nt">&lt;/saml:AttributeValue&gt;</span>
<span class="linenos">101</span>            <span class="nt">&lt;/saml:Attribute&gt;</span>
<span class="linenos">102</span>            <span class="nt">&lt;saml:Attribute</span> <span class="na">FriendlyName=</span><span class="s">&quot;Cognome&quot;</span> <span class="na">Name=</span><span class="s">&quot;familyName&quot;</span> <span class="na">NameFormat=</span><span class="s">&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:basic&quot;</span><span class="nt">&gt;</span>
<span class="linenos">103</span>                <span class="nt">&lt;saml:AttributeValue</span> <span class="na">xsi:type=</span><span class="s">&quot;xs:string&quot;</span><span class="nt">&gt;</span>COGNOME<span class="nt">&lt;/saml:AttributeValue&gt;</span>
<span class="linenos">104</span>            <span class="nt">&lt;/saml:Attribute&gt;</span>
<span class="linenos">105</span>        <span class="nt">&lt;/saml:AttributeStatement&gt;</span>
<span class="linenos">106</span>    <span class="nt">&lt;/saml:Assertion&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="logout">
<span id="id1"></span><h2><span class="section-number">2.3. </span>Logout<a class="headerlink" href="#logout" title="Permalink to this heading">¶</a></h2>
<p>Lo schema di autenticazione Entra con CIE, nella versione attuale, non implementa il Single logout SAML. Il meccanismo di logout previsto gestisce la sola sessione relativa all'Identity Provider non propagando il logout sulle relative sessioni dei Service Provider. A tal proposito é onere del Service Provider garantire il logout al proprio servizio autenticato tramite un apposito endpoint presente nei metadata dell'Identity Provider all'interno del tag <code class="code highlight xml docutils literal highlight-xml"><span class="nt">&lt;SingleLogoutService&gt;</span></code> che viene invocato mediante HTTP-GET e che reinderizza su una apposita pagina dell'IdP server CieID recante il messaggio &quot;Logout effettuato con successo&quot;.</p>
<figure class="align-default" id="logout-entra-con-cie">
<img alt="Schermata di logout" src="_images/SimpleLogout.png" />
<figcaption>
<p><span class="caption-number">Fig. 2.2 </span><span class="caption-text">Schermata di conferma di avvenuto Logout.</span><a class="headerlink" href="#logout-entra-con-cie" title="Link a questa immagine">¶</a></p>
</figcaption>
</figure>
</section>
</section>


          
            <div class="footer-buttons footer-buttons--next" role="navigation" aria-label="footer navigation">
                  <a href="binding.html" class="" title="3. Modalitá di trasmissione dei messaggi" accesskey="n" rel="next"><span class="section-number">3. </span>Modalitá di trasmissione dei messaggi</a>
              </div>
            
          </div>

        </div>
      </div>
  </div>
  <footer class="footer container-fluid container-fluid--desktop">
  <div class="px-3 pt-md-3 pb-md-2 mx-md-5 mb-4 mb-md-0">
    <div class="row align-items-center d-flex">
      <div class="col-xs-12 col-sm-6 col-lg-4 pt-4 pt-sm-5">
        <a href="http://teamdigitale.governo.it/" target="_blank" class="d-inline-block" rel="noopener">
          <div class="d-flex align-items-center">
            <div class="px-2">
              <img class="team-logo--icon" src="_static/images/team-digitale-logo.svg" alt="Team per la Trasformazione Digitale">
            </div>
            <div class="px-2 border-white border-left team-logo--text text-white">
              Team per la Trasformazione Digitale
            </div>
          </div>
        </a>
      </div>
      <div class="col-xs-12 col-sm-6 col-lg-4">
        <span class="d-block m-2 in-collaboration">in collaborazione con</span>
        <a href="https://www.agid.gov.it/" target="_blank" class="d-inline-block" rel="noopener">
          <div class="d-flex align-items-center">
            <div class="px-2">
              <img class="agid-logo--icon" src="_static/images/agid-logo.svg" alt="Agenzia per l'Italia Digitale">
            </div>
            <span class="agid-logo--separator border-white border-left"></span>
            <div class="px-2 agid-logo--text text-white">
              Agenzia per l'Italia Digitale
            </div>
          </div>
        </a>
      </div>
      <div class="col-sm-12 col-lg-4 pt-4 pt-sm-5">
        <div class="text-center text-lg-right social d-flex align-items-center justify-content-center justify-content-lg-end flex-column flex-lg-row">
          <div class="mr-lg-1 mb-2 mb-lg-0">Seguici su</div>
          <div>
            <a href="https://github.com/italia/" class="d-inline-flex small-prints mx-1 social__link"><i class="d-inline-block it-github"></i></a>
            <a href="https://twitter.com/teamdigitaleIT" class="d-inline-flex small-prints mx-1 social__link"><i class="d-inline-block it-twitter"></i></a>
            <a href="https://www.linkedin.com/company/teamdigitale/" class="d-finline-lex small-prints mx-1 social__link"><i class="d-inline-block it-linkedin"></i></a>
          </div>
        </div>
      </div>
    </div>
    <!--/row-->

    <div class="row pb-4 colophon mt-md-5 mt-sm-3 pt-3 pt-sm-2">
      <ul class="col list-inline small">
        
        <li class="list-inline-item">
          <strong><a class="footer-menu__link text-light-blue small-prints" href="/privacy-policy/">Privacy policy</a></strong>
        </li>
        
        <li class="list-inline-item">
          <strong><a class="footer-menu__link text-light-blue small-prints" href="/cookies-policy">Cookie policy</a></strong>
        </li>
        
        <li class="list-inline-item">
          <strong><a class="footer-menu__link text-light-blue small-prints" href="/note-legali">Note legali</a></strong>
        </li>
        
      </ul>
    </div>
  </div>
</footer>
  <script type="text/javascript">
var t = {
  this : "it",
  locale : "it_IT",
  about_these_documents : "Informazioni su questi documenti",
  active_lang : "lingua attiva",
  cookiebar_accept : "Accetto",
  cookiebar_msg : "Questo sito utilizza cookie tecnici, analytics e di terze parti. Proseguendo nella navigazione accetti l’utilizzo dei cookie.",
  cookiebar_privacy_policy : "Cookie policy",
  copyright : "Copyright",
  documents : "Documentazione",
  download : "Scarica",
  footer_link_privacy_policy : "Privacy policy",
  footer_link_cookies : "Cookie policy",
  footer_link_legal_notes : "Note legali",
  go_to : "Vai a",
  index : "Indice",
  last_updated : "Più recenti",
  most_viewed_this_month : "Più visti questo mese",
  navigation_menu_label : "Menu di navigazione",
  navigation_menu_esc : "esci dalla navigazione",
  search : "Cerca",
  search_form_label : "Cerca nel documento",
  search_form_off : "disattiva il form di ricerca",
  search_form_on : "attiva il form di ricerca",
  search_form_start : "avvia la ricerca",
  search_results : "Risultati della ricerca",
  search_no_results : "La tua ricerca non ha prodotto documenti. Assicurati di non aver commesso errori di digitazione.",
  site_subtitle : "Documenti pubblici, digitali.",
  site_title : "Docs Italia",
  share_msg : "condividi",
  skiplink_goto_content : "vai ai contenuti",
  skiplink_goto_navigation : "vai alla navigazione del sito",
  toggle_menu_label : "accedi al menu",
  version : "versione",
  compare : "Confronta",
  copy_link : "copia link",
  copied_link : "link copiato",
  see_actions : "vedi azioni",
  other_actions : "altre azioni",
  comments : "commenti",
  back_to_text : "torna al testo",
  glossary_empty : "informazione non trovata",
  glossary : "glossario",
  go_to_glossary : "vai al glossario",
  deepening : "approfondimento",
  example : "esempio",
  must : "si deve",
  must_not : "non si deve",
  should : "si dovrebbe",
  should_not : "non si dovrebbe",
  may : "si può",
  use : "usa",
  use_not : "non usare",
  consultation : "consultazione",
  show_more : "mostra tutto",
  show_less : "mostra meno",
  content_index : "indice dei contenuti",
  table_index : "indice delle tabelle",
  figures_index : "indice delle figure",
  figures : "figure",
  tables : "tabelle",
  contents : "contenuti",
  in_consultation : "in consultazione",
  indices_and_glossary : "indici e glossario",
  note : "nota",
  no_description : "nessuna descrizione",
  no_content : "nessuna sezione",
  no_glossary : "nessun glossario",
  no_figures : "nessuna figura",
  no_tables : "nessuna tabella",
  summary : "sommario",
  project : "Progetto",
  administration : "Amministrazione",
  info : "Informazioni",
  related : "Documenti correlati",
  actions : "Azioni",
  tags : "Tag",
  view_source : "Sorgente",
  previous : "precedente",
  next : "successivo",
  in_collaboration_with : "in collaborazione con",
  follow_us : "seguici su",
  header_link_trasformazione : "Piano Triennale",
  header_link_piattaforme : "Piattaforme",
  header_link_software : "Software",
  header_link_api : "API",
  header_link_community : "Le community",
  header_link_developers : "Developers",
  header_link_design : "Designers",
  header_link_tools : "Gli strumenti",
  header_link_forum : "Forum",
  header_link_docs : "Docs",
  header_link_github : "GitHub",
  header_link_secondary_who_we_are : "Chi siamo",
  header_link_projects : "Progetti",
  header_link_documents : "Documenti",
  header_link_administrations : "Amministrazioni",
  header_link_whatis : "Che cos'è",
}
</script>
  <a href="#" aria-hidden="true" data-attribute="return-to-top" class="return-to-top">
  <i class="it-collapse"></i>
</a>
  
  <script type="text/javascript">
var PRODUCTION_DOMAIN = 'localhost';
var DOCSITALIA_DATA = {
  publisher_slug: 'organizzazione-demo',
  publisher_project_slug: 'progetto-demo'
}

LOCAL = true;
READTHEDOCS_DATA = {
  project: 'demo-document',
  version: 'bozza',
  language: 'it',
  api_host: '//' + PRODUCTION_DOMAIN
}

var DOCUMENTATION_OPTIONS = {
    URL_ROOT: './',
    VERSION: 'version: latest',
    LANGUAGE: 'it',
    COLLAPSE_INDEX: false,
    FILE_SUFFIX: '.html',
    HAS_SOURCE: true,
    SOURCELINK_SUFFIX: '.txt'
};
</script>
<script src="_static/js/theme.js"></script>
<script type="text/javascript" src="_static/documentation_options.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/_sphinx_javascript_frameworks_compat.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/translations.js"></script>
  
  <script type="text/javascript">
  <!-- Google analytics -->
  (function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o), m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

  $(document).ready(function() {
    var sendGaPageview = function() {
      ga('create', '', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
      
    };
    if ($.fn['cookiebar'].Constructor._getCookieEU()) {
      sendGaPageview();
    } else {
      $(document).on('close.bs.cookiebar', sendGaPageview);
    }
  });
  <!-- End Google analytics -->
  <!-- Matomo -->
  /*
  var _paq = _paq || [];
  _paq.push(['setSiteId', '']);
  (function () {
    var u = '//italia.piwikpro.com/';
    _paq.push(['setTrackerUrl', u + 'piwik.php']);
    var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
    g.type = 'text/javascript'; g.async = true; g.defer = true; g.src = u + 'piwik.js'; s.parentNode.insertBefore(g, s);
  })();

  $(document).ready(function() {
    var sendMatomoPageview = function() {
      _paq.push(['setDocumentTitle', document.domain + '/' + document.title]);
      _paq.push(['enableLinkTracking']);
      _paq.push(['setDoNotTrack', 1]);
      _paq.push(['trackPageView']);
    };
    if ($.fn['cookiebar'].Constructor._getCookieEU()) {
      sendMatomoPageview();
    } else {
      $(document).on('close.bs.cookiebar', sendMatomoPageview);
    }
  });*/
  <!-- End Matomo -->
</script>
  
    <div class="cookiebar bg-dark p-4 hide" aria-hidden="true">
  <div class="container">
    <div class="row d-flex align-items-center">
      <div class="col-12 col-md-7">
        <span class="text-white">Questo sito utilizza cookie tecnici, analytics e di terze parti. Proseguendo nella navigazione accetti l’utilizzo dei cookie.</span>
      </div>
      <div class="col-12 col-md-5 mt-2 mt-md-0 text-right">
        <a class="btn btn-link" href="/cookies-policy/">Cookie policy</a>
        <button class="btn btn-sm btn-primary mr-2" data-accept="cookiebar">Accetto</button>
      </div>
    </div>
  </div>
</div>
  
  
  <div class="modal fade modal-sm-full" id="document-info" tabindex="-1" role="dialog" aria-labelledby="document-title" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content rounded">
      <div class="modal-header">
        <h4 class="modal-title" id="document-title">Titolo del documento non impostato</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p></p>
        <p class="text-sans-serif">
          <i class="docs-icon-project font-weight-bold"></i>
          <span class="font-weight-bold ml-1 align-middle">Progetto:</span>
          <a href="/organizzazione-demo/progetto-demo" class="align-middle">
            Progetto demo
          </a>
        </p>
        <p class="text-sans-serif">
          <i class="docs-icon-publisher font-weight-bold"></i>
          <span class="font-weight-bold ml-1 align-middle">Amministrazione:</span>
          <a href="/organizzazione-demo/" class="align-middle">
            Organizzazione demo
          </a>
        </p>
        <div class="d-flex text-sans-serif my-4">
          <div class="d-flex font-weight-bold align-items-center"><span class="mr-2">Tag:</span></div>
          <div class="d-flex flex-wrap">
            
            <span class="border border-primary rounded m-1 py-1 px-2 tag"><a href="#">demo</a></span>
            
            <span class="border border-primary rounded m-1 py-1 px-2 tag"><a href="#">docs italia</a></span>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" tabindex="-1" role="dialog" id="document-actions" aria-hidden="true">
  <div class="modal-dialog mt-5" role="document">
     <div class="modal-content rounded">
        <div class="modal-body p-1">
          <div class="document-actions d-flex flex-column flex-md-row justify-content-around w-100 p-2 p-md-0 text-blue">
  <div class="dropdown p-3 px-md-2 py-md-0 d-flex flex-wrap">
    <a class="btn dropdown-toggle p-2 flex-grow-1 text-left" href="#" id="downloads-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="docs-icon-download align-middle"></span>
      <span class="align-middle">Scarica</span>
    </a>
    <div class="dropdown-menu w-100" aria-labelledby="downloads-dropdown" aria-disabled="false">
      <div class="link-list-wrapper">
        <ul class="link-list">
          
        </ul>
      </div>
    </div>
  </div>
  
  
  
  <div class="p-3 px-md-2 py-md-0">
    <a href="#" role="button" class="btn p-2 disabled" aria-disabled="true">
        <span class="docs-icon-github"></span>
        <span class="align-middle">Sorgente</span>
    </a>
  </div>
</div>
        </div>
     </div>
  </div>
</div>

  
</body>
</html>